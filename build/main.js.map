{"version":3,"file":"main.js","mappings":"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","sources":["webpack://vowel-analysis/./node_modules/solid-js/dist/solid.js","webpack://vowel-analysis/./node_modules/solid-js/web/dist/web.js","webpack://vowel-analysis/./src/vowelSynth.ts","webpack://vowel-analysis/./src/common.ts","webpack://vowel-analysis/./src/VowelChart.tsx","webpack://vowel-analysis/./src/lpc.ts","webpack://vowel-analysis/./src/roots.ts","webpack://vowel-analysis/./src/formantExtractor.ts","webpack://vowel-analysis/./src/AnalysisChart.tsx","webpack://vowel-analysis/./src/wavEncode.ts","webpack://vowel-analysis/./src/RecordingPanel.tsx","webpack://vowel-analysis/./src/test.ts","webpack://vowel-analysis/./src/main.tsx"],"sourcesContent":["let taskIdCounter = 1,\n  isCallbackScheduled = false,\n  isPerformingWork = false,\n  taskQueue = [],\n  currentTask = null,\n  shouldYieldToHost = null,\n  yieldInterval = 5,\n  deadline = 0,\n  maxYieldInterval = 300,\n  scheduleCallback = null,\n  scheduledCallback = null;\nconst maxSigned31BitInt = 1073741823;\nfunction setupScheduler() {\n  const channel = new MessageChannel(),\n    port = channel.port2;\n  scheduleCallback = () => port.postMessage(null);\n  channel.port1.onmessage = () => {\n    if (scheduledCallback !== null) {\n      const currentTime = performance.now();\n      deadline = currentTime + yieldInterval;\n      const hasTimeRemaining = true;\n      try {\n        const hasMoreWork = scheduledCallback(hasTimeRemaining, currentTime);\n        if (!hasMoreWork) {\n          scheduledCallback = null;\n        } else port.postMessage(null);\n      } catch (error) {\n        port.postMessage(null);\n        throw error;\n      }\n    }\n  };\n  if (navigator && navigator.scheduling && navigator.scheduling.isInputPending) {\n    const scheduling = navigator.scheduling;\n    shouldYieldToHost = () => {\n      const currentTime = performance.now();\n      if (currentTime >= deadline) {\n        if (scheduling.isInputPending()) {\n          return true;\n        }\n        return currentTime >= maxYieldInterval;\n      } else {\n        return false;\n      }\n    };\n  } else {\n    shouldYieldToHost = () => performance.now() >= deadline;\n  }\n}\nfunction enqueue(taskQueue, task) {\n  function findIndex() {\n    let m = 0;\n    let n = taskQueue.length - 1;\n    while (m <= n) {\n      const k = n + m >> 1;\n      const cmp = task.expirationTime - taskQueue[k].expirationTime;\n      if (cmp > 0) m = k + 1;else if (cmp < 0) n = k - 1;else return k;\n    }\n    return m;\n  }\n  taskQueue.splice(findIndex(), 0, task);\n}\nfunction requestCallback(fn, options) {\n  if (!scheduleCallback) setupScheduler();\n  let startTime = performance.now(),\n    timeout = maxSigned31BitInt;\n  if (options && options.timeout) timeout = options.timeout;\n  const newTask = {\n    id: taskIdCounter++,\n    fn,\n    startTime,\n    expirationTime: startTime + timeout\n  };\n  enqueue(taskQueue, newTask);\n  if (!isCallbackScheduled && !isPerformingWork) {\n    isCallbackScheduled = true;\n    scheduledCallback = flushWork;\n    scheduleCallback();\n  }\n  return newTask;\n}\nfunction cancelCallback(task) {\n  task.fn = null;\n}\nfunction flushWork(hasTimeRemaining, initialTime) {\n  isCallbackScheduled = false;\n  isPerformingWork = true;\n  try {\n    return workLoop(hasTimeRemaining, initialTime);\n  } finally {\n    currentTask = null;\n    isPerformingWork = false;\n  }\n}\nfunction workLoop(hasTimeRemaining, initialTime) {\n  let currentTime = initialTime;\n  currentTask = taskQueue[0] || null;\n  while (currentTask !== null) {\n    if (currentTask.expirationTime > currentTime && (!hasTimeRemaining || shouldYieldToHost())) {\n      break;\n    }\n    const callback = currentTask.fn;\n    if (callback !== null) {\n      currentTask.fn = null;\n      const didUserCallbackTimeout = currentTask.expirationTime <= currentTime;\n      callback(didUserCallbackTimeout);\n      currentTime = performance.now();\n      if (currentTask === taskQueue[0]) {\n        taskQueue.shift();\n      }\n    } else taskQueue.shift();\n    currentTask = taskQueue[0] || null;\n  }\n  return currentTask !== null;\n}\n\nconst sharedConfig = {\n  context: undefined,\n  registry: undefined\n};\nfunction setHydrateContext(context) {\n  sharedConfig.context = context;\n}\nfunction nextHydrateContext() {\n  return {\n    ...sharedConfig.context,\n    id: `${sharedConfig.context.id}${sharedConfig.context.count++}-`,\n    count: 0\n  };\n}\n\nconst equalFn = (a, b) => a === b;\nconst $PROXY = Symbol(\"solid-proxy\");\nconst $TRACK = Symbol(\"solid-track\");\nconst $DEVCOMP = Symbol(\"solid-dev-component\");\nconst signalOptions = {\n  equals: equalFn\n};\nlet ERROR = null;\nlet runEffects = runQueue;\nconst STALE = 1;\nconst PENDING = 2;\nconst UNOWNED = {\n  owned: null,\n  cleanups: null,\n  context: null,\n  owner: null\n};\nconst NO_INIT = {};\nvar Owner = null;\nlet Transition = null;\nlet Scheduler = null;\nlet ExternalSourceFactory = null;\nlet Listener = null;\nlet Updates = null;\nlet Effects = null;\nlet ExecCount = 0;\nconst [transPending, setTransPending] = /*@__PURE__*/createSignal(false);\nfunction createRoot(fn, detachedOwner) {\n  const listener = Listener,\n    owner = Owner,\n    unowned = fn.length === 0,\n    current = detachedOwner === undefined ? owner : detachedOwner,\n    root = unowned ? UNOWNED : {\n      owned: null,\n      cleanups: null,\n      context: current ? current.context : null,\n      owner: current\n    },\n    updateFn = unowned ? fn : () => fn(() => untrack(() => cleanNode(root)));\n  Owner = root;\n  Listener = null;\n  try {\n    return runUpdates(updateFn, true);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n}\nfunction createSignal(value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const s = {\n    value,\n    observers: null,\n    observerSlots: null,\n    comparator: options.equals || undefined\n  };\n  const setter = value => {\n    if (typeof value === \"function\") {\n      if (Transition && Transition.running && Transition.sources.has(s)) value = value(s.tValue);else value = value(s.value);\n    }\n    return writeSignal(s, value);\n  };\n  return [readSignal.bind(s), setter];\n}\nfunction createComputed(fn, value, options) {\n  const c = createComputation(fn, value, true, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);else updateComputation(c);\n}\nfunction createRenderEffect(fn, value, options) {\n  const c = createComputation(fn, value, false, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);else updateComputation(c);\n}\nfunction createEffect(fn, value, options) {\n  runEffects = runUserEffects;\n  const c = createComputation(fn, value, false, STALE),\n    s = SuspenseContext && useContext(SuspenseContext);\n  if (s) c.suspense = s;\n  if (!options || !options.render) c.user = true;\n  Effects ? Effects.push(c) : updateComputation(c);\n}\nfunction createReaction(onInvalidate, options) {\n  let fn;\n  const c = createComputation(() => {\n      fn ? fn() : untrack(onInvalidate);\n      fn = undefined;\n    }, undefined, false, 0),\n    s = SuspenseContext && useContext(SuspenseContext);\n  if (s) c.suspense = s;\n  c.user = true;\n  return tracking => {\n    fn = tracking;\n    updateComputation(c);\n  };\n}\nfunction createMemo(fn, value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const c = createComputation(fn, value, true, 0);\n  c.observers = null;\n  c.observerSlots = null;\n  c.comparator = options.equals || undefined;\n  if (Scheduler && Transition && Transition.running) {\n    c.tState = STALE;\n    Updates.push(c);\n  } else updateComputation(c);\n  return readSignal.bind(c);\n}\nfunction createResource(pSource, pFetcher, pOptions) {\n  let source;\n  let fetcher;\n  let options;\n  if (arguments.length === 2 && typeof pFetcher === \"object\" || arguments.length === 1) {\n    source = true;\n    fetcher = pSource;\n    options = pFetcher || {};\n  } else {\n    source = pSource;\n    fetcher = pFetcher;\n    options = pOptions || {};\n  }\n  let pr = null,\n    initP = NO_INIT,\n    id = null,\n    loadedUnderTransition = false,\n    scheduled = false,\n    resolved = (\"initialValue\" in options),\n    dynamic = typeof source === \"function\" && createMemo(source);\n  const contexts = new Set(),\n    [value, setValue] = (options.storage || createSignal)(options.initialValue),\n    [error, setError] = createSignal(undefined),\n    [track, trigger] = createSignal(undefined, {\n      equals: false\n    }),\n    [state, setState] = createSignal(resolved ? \"ready\" : \"unresolved\");\n  if (sharedConfig.context) {\n    id = `${sharedConfig.context.id}${sharedConfig.context.count++}`;\n    let v;\n    if (options.ssrLoadFrom === \"initial\") initP = options.initialValue;else if (sharedConfig.load && (v = sharedConfig.load(id))) initP = v[0];\n  }\n  function loadEnd(p, v, error, key) {\n    if (pr === p) {\n      pr = null;\n      key !== undefined && (resolved = true);\n      if ((p === initP || v === initP) && options.onHydrated) queueMicrotask(() => options.onHydrated(key, {\n        value: v\n      }));\n      initP = NO_INIT;\n      if (Transition && p && loadedUnderTransition) {\n        Transition.promises.delete(p);\n        loadedUnderTransition = false;\n        runUpdates(() => {\n          Transition.running = true;\n          completeLoad(v, error);\n        }, false);\n      } else completeLoad(v, error);\n    }\n    return v;\n  }\n  function completeLoad(v, err) {\n    runUpdates(() => {\n      if (err === undefined) setValue(() => v);\n      setState(err !== undefined ? \"errored\" : resolved ? \"ready\" : \"unresolved\");\n      setError(err);\n      for (const c of contexts.keys()) c.decrement();\n      contexts.clear();\n    }, false);\n  }\n  function read() {\n    const c = SuspenseContext && useContext(SuspenseContext),\n      v = value(),\n      err = error();\n    if (err !== undefined && !pr) throw err;\n    if (Listener && !Listener.user && c) {\n      createComputed(() => {\n        track();\n        if (pr) {\n          if (c.resolved && Transition && loadedUnderTransition) Transition.promises.add(pr);else if (!contexts.has(c)) {\n            c.increment();\n            contexts.add(c);\n          }\n        }\n      });\n    }\n    return v;\n  }\n  function load(refetching = true) {\n    if (refetching !== false && scheduled) return;\n    scheduled = false;\n    const lookup = dynamic ? dynamic() : source;\n    loadedUnderTransition = Transition && Transition.running;\n    if (lookup == null || lookup === false) {\n      loadEnd(pr, untrack(value));\n      return;\n    }\n    if (Transition && pr) Transition.promises.delete(pr);\n    const p = initP !== NO_INIT ? initP : untrack(() => fetcher(lookup, {\n      value: value(),\n      refetching\n    }));\n    if (typeof p !== \"object\" || !(p && \"then\" in p)) {\n      loadEnd(pr, p, undefined, lookup);\n      return p;\n    }\n    pr = p;\n    scheduled = true;\n    queueMicrotask(() => scheduled = false);\n    runUpdates(() => {\n      setState(resolved ? \"refreshing\" : \"pending\");\n      trigger();\n    }, false);\n    return p.then(v => loadEnd(p, v, undefined, lookup), e => loadEnd(p, undefined, castError(e), lookup));\n  }\n  Object.defineProperties(read, {\n    state: {\n      get: () => state()\n    },\n    error: {\n      get: () => error()\n    },\n    loading: {\n      get() {\n        const s = state();\n        return s === \"pending\" || s === \"refreshing\";\n      }\n    },\n    latest: {\n      get() {\n        if (!resolved) return read();\n        const err = error();\n        if (err && !pr) throw err;\n        return value();\n      }\n    }\n  });\n  if (dynamic) createComputed(() => load(false));else load(false);\n  return [read, {\n    refetch: load,\n    mutate: setValue\n  }];\n}\nfunction createDeferred(source, options) {\n  let t,\n    timeout = options ? options.timeoutMs : undefined;\n  const node = createComputation(() => {\n    if (!t || !t.fn) t = requestCallback(() => setDeferred(() => node.value), timeout !== undefined ? {\n      timeout\n    } : undefined);\n    return source();\n  }, undefined, true);\n  const [deferred, setDeferred] = createSignal(Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value, options);\n  updateComputation(node);\n  setDeferred(() => Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value);\n  return deferred;\n}\nfunction createSelector(source, fn = equalFn, options) {\n  const subs = new Map();\n  const node = createComputation(p => {\n    const v = source();\n    for (const [key, val] of subs.entries()) if (fn(key, v) !== fn(key, p)) {\n      for (const c of val.values()) {\n        c.state = STALE;\n        if (c.pure) Updates.push(c);else Effects.push(c);\n      }\n    }\n    return v;\n  }, undefined, true, STALE);\n  updateComputation(node);\n  return key => {\n    const listener = Listener;\n    if (listener) {\n      let l;\n      if (l = subs.get(key)) l.add(listener);else subs.set(key, l = new Set([listener]));\n      onCleanup(() => {\n        l.delete(listener);\n        !l.size && subs.delete(key);\n      });\n    }\n    return fn(key, Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value);\n  };\n}\nfunction batch(fn) {\n  return runUpdates(fn, false);\n}\nfunction untrack(fn) {\n  if (Listener === null) return fn();\n  const listener = Listener;\n  Listener = null;\n  try {\n    return fn();\n  } finally {\n    Listener = listener;\n  }\n}\nfunction on(deps, fn, options) {\n  const isArray = Array.isArray(deps);\n  let prevInput;\n  let defer = options && options.defer;\n  return prevValue => {\n    let input;\n    if (isArray) {\n      input = Array(deps.length);\n      for (let i = 0; i < deps.length; i++) input[i] = deps[i]();\n    } else input = deps();\n    if (defer) {\n      defer = false;\n      return undefined;\n    }\n    const result = untrack(() => fn(input, prevInput, prevValue));\n    prevInput = input;\n    return result;\n  };\n}\nfunction onMount(fn) {\n  createEffect(() => untrack(fn));\n}\nfunction onCleanup(fn) {\n  if (Owner === null) ;else if (Owner.cleanups === null) Owner.cleanups = [fn];else Owner.cleanups.push(fn);\n  return fn;\n}\nfunction catchError(fn, handler) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  Owner = createComputation(undefined, undefined, true);\n  Owner.context = {\n    ...Owner.context,\n    [ERROR]: [handler]\n  };\n  if (Transition && Transition.running) Transition.sources.add(Owner);\n  try {\n    return fn();\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = Owner.owner;\n  }\n}\nfunction getListener() {\n  return Listener;\n}\nfunction getOwner() {\n  return Owner;\n}\nfunction runWithOwner(o, fn) {\n  const prev = Owner;\n  const prevListener = Listener;\n  Owner = o;\n  Listener = null;\n  try {\n    return runUpdates(fn, true);\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = prev;\n    Listener = prevListener;\n  }\n}\nfunction enableScheduling(scheduler = requestCallback) {\n  Scheduler = scheduler;\n}\nfunction startTransition(fn) {\n  if (Transition && Transition.running) {\n    fn();\n    return Transition.done;\n  }\n  const l = Listener;\n  const o = Owner;\n  return Promise.resolve().then(() => {\n    Listener = l;\n    Owner = o;\n    let t;\n    if (Scheduler || SuspenseContext) {\n      t = Transition || (Transition = {\n        sources: new Set(),\n        effects: [],\n        promises: new Set(),\n        disposed: new Set(),\n        queue: new Set(),\n        running: true\n      });\n      t.done || (t.done = new Promise(res => t.resolve = res));\n      t.running = true;\n    }\n    runUpdates(fn, false);\n    Listener = Owner = null;\n    return t ? t.done : undefined;\n  });\n}\nfunction useTransition() {\n  return [transPending, startTransition];\n}\nfunction resumeEffects(e) {\n  Effects.push.apply(Effects, e);\n  e.length = 0;\n}\nfunction createContext(defaultValue, options) {\n  const id = Symbol(\"context\");\n  return {\n    id,\n    Provider: createProvider(id),\n    defaultValue\n  };\n}\nfunction useContext(context) {\n  return Owner && Owner.context && Owner.context[context.id] !== undefined ? Owner.context[context.id] : context.defaultValue;\n}\nfunction children(fn) {\n  const children = createMemo(fn);\n  const memo = createMemo(() => resolveChildren(children()));\n  memo.toArray = () => {\n    const c = memo();\n    return Array.isArray(c) ? c : c != null ? [c] : [];\n  };\n  return memo;\n}\nlet SuspenseContext;\nfunction getSuspenseContext() {\n  return SuspenseContext || (SuspenseContext = createContext());\n}\nfunction enableExternalSource(factory) {\n  if (ExternalSourceFactory) {\n    const oldFactory = ExternalSourceFactory;\n    ExternalSourceFactory = (fn, trigger) => {\n      const oldSource = oldFactory(fn, trigger);\n      const source = factory(x => oldSource.track(x), trigger);\n      return {\n        track: x => source.track(x),\n        dispose() {\n          source.dispose();\n          oldSource.dispose();\n        }\n      };\n    };\n  } else {\n    ExternalSourceFactory = factory;\n  }\n}\nfunction readSignal() {\n  const runningTransition = Transition && Transition.running;\n  if (this.sources && (runningTransition ? this.tState : this.state)) {\n    if ((runningTransition ? this.tState : this.state) === STALE) updateComputation(this);else {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(this), false);\n      Updates = updates;\n    }\n  }\n  if (Listener) {\n    const sSlot = this.observers ? this.observers.length : 0;\n    if (!Listener.sources) {\n      Listener.sources = [this];\n      Listener.sourceSlots = [sSlot];\n    } else {\n      Listener.sources.push(this);\n      Listener.sourceSlots.push(sSlot);\n    }\n    if (!this.observers) {\n      this.observers = [Listener];\n      this.observerSlots = [Listener.sources.length - 1];\n    } else {\n      this.observers.push(Listener);\n      this.observerSlots.push(Listener.sources.length - 1);\n    }\n  }\n  if (runningTransition && Transition.sources.has(this)) return this.tValue;\n  return this.value;\n}\nfunction writeSignal(node, value, isComp) {\n  let current = Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value;\n  if (!node.comparator || !node.comparator(current, value)) {\n    if (Transition) {\n      const TransitionRunning = Transition.running;\n      if (TransitionRunning || !isComp && Transition.sources.has(node)) {\n        Transition.sources.add(node);\n        node.tValue = value;\n      }\n      if (!TransitionRunning) node.value = value;\n    } else node.value = value;\n    if (node.observers && node.observers.length) {\n      runUpdates(() => {\n        for (let i = 0; i < node.observers.length; i += 1) {\n          const o = node.observers[i];\n          const TransitionRunning = Transition && Transition.running;\n          if (TransitionRunning && Transition.disposed.has(o)) continue;\n          if (TransitionRunning ? !o.tState : !o.state) {\n            if (o.pure) Updates.push(o);else Effects.push(o);\n            if (o.observers) markDownstream(o);\n          }\n          if (!TransitionRunning) o.state = STALE;else o.tState = STALE;\n        }\n        if (Updates.length > 10e5) {\n          Updates = [];\n          if (false) ;\n          throw new Error();\n        }\n      }, false);\n    }\n  }\n  return value;\n}\nfunction updateComputation(node) {\n  if (!node.fn) return;\n  cleanNode(node);\n  const owner = Owner,\n    listener = Listener,\n    time = ExecCount;\n  Listener = Owner = node;\n  runComputation(node, Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value, time);\n  if (Transition && !Transition.running && Transition.sources.has(node)) {\n    queueMicrotask(() => {\n      runUpdates(() => {\n        Transition && (Transition.running = true);\n        Listener = Owner = node;\n        runComputation(node, node.tValue, time);\n        Listener = Owner = null;\n      }, false);\n    });\n  }\n  Listener = listener;\n  Owner = owner;\n}\nfunction runComputation(node, value, time) {\n  let nextValue;\n  try {\n    nextValue = node.fn(value);\n  } catch (err) {\n    if (node.pure) {\n      if (Transition && Transition.running) {\n        node.tState = STALE;\n        node.tOwned && node.tOwned.forEach(cleanNode);\n        node.tOwned = undefined;\n      } else {\n        node.state = STALE;\n        node.owned && node.owned.forEach(cleanNode);\n        node.owned = null;\n      }\n    }\n    node.updatedAt = time + 1;\n    return handleError(err);\n  }\n  if (!node.updatedAt || node.updatedAt <= time) {\n    if (node.updatedAt != null && \"observers\" in node) {\n      writeSignal(node, nextValue, true);\n    } else if (Transition && Transition.running && node.pure) {\n      Transition.sources.add(node);\n      node.tValue = nextValue;\n    } else node.value = nextValue;\n    node.updatedAt = time;\n  }\n}\nfunction createComputation(fn, init, pure, state = STALE, options) {\n  const c = {\n    fn,\n    state: state,\n    updatedAt: null,\n    owned: null,\n    sources: null,\n    sourceSlots: null,\n    cleanups: null,\n    value: init,\n    owner: Owner,\n    context: Owner ? Owner.context : null,\n    pure\n  };\n  if (Transition && Transition.running) {\n    c.state = 0;\n    c.tState = state;\n  }\n  if (Owner === null) ;else if (Owner !== UNOWNED) {\n    if (Transition && Transition.running && Owner.pure) {\n      if (!Owner.tOwned) Owner.tOwned = [c];else Owner.tOwned.push(c);\n    } else {\n      if (!Owner.owned) Owner.owned = [c];else Owner.owned.push(c);\n    }\n  }\n  if (ExternalSourceFactory) {\n    const [track, trigger] = createSignal(undefined, {\n      equals: false\n    });\n    const ordinary = ExternalSourceFactory(c.fn, trigger);\n    onCleanup(() => ordinary.dispose());\n    const triggerInTransition = () => startTransition(trigger).then(() => inTransition.dispose());\n    const inTransition = ExternalSourceFactory(c.fn, triggerInTransition);\n    c.fn = x => {\n      track();\n      return Transition && Transition.running ? inTransition.track(x) : ordinary.track(x);\n    };\n  }\n  return c;\n}\nfunction runTop(node) {\n  const runningTransition = Transition && Transition.running;\n  if ((runningTransition ? node.tState : node.state) === 0) return;\n  if ((runningTransition ? node.tState : node.state) === PENDING) return lookUpstream(node);\n  if (node.suspense && untrack(node.suspense.inFallback)) return node.suspense.effects.push(node);\n  const ancestors = [node];\n  while ((node = node.owner) && (!node.updatedAt || node.updatedAt < ExecCount)) {\n    if (runningTransition && Transition.disposed.has(node)) return;\n    if (runningTransition ? node.tState : node.state) ancestors.push(node);\n  }\n  for (let i = ancestors.length - 1; i >= 0; i--) {\n    node = ancestors[i];\n    if (runningTransition) {\n      let top = node,\n        prev = ancestors[i + 1];\n      while ((top = top.owner) && top !== prev) {\n        if (Transition.disposed.has(top)) return;\n      }\n    }\n    if ((runningTransition ? node.tState : node.state) === STALE) {\n      updateComputation(node);\n    } else if ((runningTransition ? node.tState : node.state) === PENDING) {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(node, ancestors[0]), false);\n      Updates = updates;\n    }\n  }\n}\nfunction runUpdates(fn, init) {\n  if (Updates) return fn();\n  let wait = false;\n  if (!init) Updates = [];\n  if (Effects) wait = true;else Effects = [];\n  ExecCount++;\n  try {\n    const res = fn();\n    completeUpdates(wait);\n    return res;\n  } catch (err) {\n    if (!wait) Effects = null;\n    Updates = null;\n    handleError(err);\n  }\n}\nfunction completeUpdates(wait) {\n  if (Updates) {\n    if (Scheduler && Transition && Transition.running) scheduleQueue(Updates);else runQueue(Updates);\n    Updates = null;\n  }\n  if (wait) return;\n  let res;\n  if (Transition) {\n    if (!Transition.promises.size && !Transition.queue.size) {\n      const sources = Transition.sources;\n      const disposed = Transition.disposed;\n      Effects.push.apply(Effects, Transition.effects);\n      res = Transition.resolve;\n      for (const e of Effects) {\n        \"tState\" in e && (e.state = e.tState);\n        delete e.tState;\n      }\n      Transition = null;\n      runUpdates(() => {\n        for (const d of disposed) cleanNode(d);\n        for (const v of sources) {\n          v.value = v.tValue;\n          if (v.owned) {\n            for (let i = 0, len = v.owned.length; i < len; i++) cleanNode(v.owned[i]);\n          }\n          if (v.tOwned) v.owned = v.tOwned;\n          delete v.tValue;\n          delete v.tOwned;\n          v.tState = 0;\n        }\n        setTransPending(false);\n      }, false);\n    } else if (Transition.running) {\n      Transition.running = false;\n      Transition.effects.push.apply(Transition.effects, Effects);\n      Effects = null;\n      setTransPending(true);\n      return;\n    }\n  }\n  const e = Effects;\n  Effects = null;\n  if (e.length) runUpdates(() => runEffects(e), false);\n  if (res) res();\n}\nfunction runQueue(queue) {\n  for (let i = 0; i < queue.length; i++) runTop(queue[i]);\n}\nfunction scheduleQueue(queue) {\n  for (let i = 0; i < queue.length; i++) {\n    const item = queue[i];\n    const tasks = Transition.queue;\n    if (!tasks.has(item)) {\n      tasks.add(item);\n      Scheduler(() => {\n        tasks.delete(item);\n        runUpdates(() => {\n          Transition.running = true;\n          runTop(item);\n        }, false);\n        Transition && (Transition.running = false);\n      });\n    }\n  }\n}\nfunction runUserEffects(queue) {\n  let i,\n    userLength = 0;\n  for (i = 0; i < queue.length; i++) {\n    const e = queue[i];\n    if (!e.user) runTop(e);else queue[userLength++] = e;\n  }\n  if (sharedConfig.context) {\n    if (sharedConfig.count) {\n      sharedConfig.effects || (sharedConfig.effects = []);\n      sharedConfig.effects.push(...queue.slice(0, userLength));\n      return;\n    } else if (sharedConfig.effects) {\n      queue = [...sharedConfig.effects, ...queue];\n      userLength += sharedConfig.effects.length;\n      delete sharedConfig.effects;\n    }\n    setHydrateContext();\n  }\n  for (i = 0; i < userLength; i++) runTop(queue[i]);\n}\nfunction lookUpstream(node, ignore) {\n  const runningTransition = Transition && Transition.running;\n  if (runningTransition) node.tState = 0;else node.state = 0;\n  for (let i = 0; i < node.sources.length; i += 1) {\n    const source = node.sources[i];\n    if (source.sources) {\n      const state = runningTransition ? source.tState : source.state;\n      if (state === STALE) {\n        if (source !== ignore && (!source.updatedAt || source.updatedAt < ExecCount)) runTop(source);\n      } else if (state === PENDING) lookUpstream(source, ignore);\n    }\n  }\n}\nfunction markDownstream(node) {\n  const runningTransition = Transition && Transition.running;\n  for (let i = 0; i < node.observers.length; i += 1) {\n    const o = node.observers[i];\n    if (runningTransition ? !o.tState : !o.state) {\n      if (runningTransition) o.tState = PENDING;else o.state = PENDING;\n      if (o.pure) Updates.push(o);else Effects.push(o);\n      o.observers && markDownstream(o);\n    }\n  }\n}\nfunction cleanNode(node) {\n  let i;\n  if (node.sources) {\n    while (node.sources.length) {\n      const source = node.sources.pop(),\n        index = node.sourceSlots.pop(),\n        obs = source.observers;\n      if (obs && obs.length) {\n        const n = obs.pop(),\n          s = source.observerSlots.pop();\n        if (index < obs.length) {\n          n.sourceSlots[s] = index;\n          obs[index] = n;\n          source.observerSlots[index] = s;\n        }\n      }\n    }\n  }\n  if (Transition && Transition.running && node.pure) {\n    if (node.tOwned) {\n      for (i = node.tOwned.length - 1; i >= 0; i--) cleanNode(node.tOwned[i]);\n      delete node.tOwned;\n    }\n    reset(node, true);\n  } else if (node.owned) {\n    for (i = node.owned.length - 1; i >= 0; i--) cleanNode(node.owned[i]);\n    node.owned = null;\n  }\n  if (node.cleanups) {\n    for (i = node.cleanups.length - 1; i >= 0; i--) node.cleanups[i]();\n    node.cleanups = null;\n  }\n  if (Transition && Transition.running) node.tState = 0;else node.state = 0;\n}\nfunction reset(node, top) {\n  if (!top) {\n    node.tState = 0;\n    Transition.disposed.add(node);\n  }\n  if (node.owned) {\n    for (let i = 0; i < node.owned.length; i++) reset(node.owned[i]);\n  }\n}\nfunction castError(err) {\n  if (err instanceof Error) return err;\n  return new Error(typeof err === \"string\" ? err : \"Unknown error\", {\n    cause: err\n  });\n}\nfunction runErrors(err, fns, owner) {\n  try {\n    for (const f of fns) f(err);\n  } catch (e) {\n    handleError(e, owner && owner.owner || null);\n  }\n}\nfunction handleError(err, owner = Owner) {\n  const fns = ERROR && owner && owner.context && owner.context[ERROR];\n  const error = castError(err);\n  if (!fns) throw error;\n  if (Effects) Effects.push({\n    fn() {\n      runErrors(error, fns, owner);\n    },\n    state: STALE\n  });else runErrors(error, fns, owner);\n}\nfunction resolveChildren(children) {\n  if (typeof children === \"function\" && !children.length) return resolveChildren(children());\n  if (Array.isArray(children)) {\n    const results = [];\n    for (let i = 0; i < children.length; i++) {\n      const result = resolveChildren(children[i]);\n      Array.isArray(result) ? results.push.apply(results, result) : results.push(result);\n    }\n    return results;\n  }\n  return children;\n}\nfunction createProvider(id, options) {\n  return function provider(props) {\n    let res;\n    createRenderEffect(() => res = untrack(() => {\n      Owner.context = {\n        ...Owner.context,\n        [id]: props.value\n      };\n      return children(() => props.children);\n    }), undefined);\n    return res;\n  };\n}\nfunction onError(fn) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  if (Owner === null) ;else if (Owner.context === null || !Owner.context[ERROR]) {\n    Owner.context = {\n      ...Owner.context,\n      [ERROR]: [fn]\n    };\n    mutateContext(Owner, ERROR, [fn]);\n  } else Owner.context[ERROR].push(fn);\n}\nfunction mutateContext(o, key, value) {\n  if (o.owned) {\n    for (let i = 0; i < o.owned.length; i++) {\n      if (o.owned[i].context === o.context) mutateContext(o.owned[i], key, value);\n      if (!o.owned[i].context) {\n        o.owned[i].context = o.context;\n        mutateContext(o.owned[i], key, value);\n      } else if (!o.owned[i].context[key]) {\n        o.owned[i].context[key] = value;\n        mutateContext(o.owned[i], key, value);\n      }\n    }\n  }\n}\n\nfunction observable(input) {\n  return {\n    subscribe(observer) {\n      if (!(observer instanceof Object) || observer == null) {\n        throw new TypeError(\"Expected the observer to be an object.\");\n      }\n      const handler = typeof observer === \"function\" ? observer : observer.next && observer.next.bind(observer);\n      if (!handler) {\n        return {\n          unsubscribe() {}\n        };\n      }\n      const dispose = createRoot(disposer => {\n        createEffect(() => {\n          const v = input();\n          untrack(() => handler(v));\n        });\n        return disposer;\n      });\n      if (getOwner()) onCleanup(dispose);\n      return {\n        unsubscribe() {\n          dispose();\n        }\n      };\n    },\n    [Symbol.observable || \"@@observable\"]() {\n      return this;\n    }\n  };\n}\nfunction from(producer) {\n  const [s, set] = createSignal(undefined, {\n    equals: false\n  });\n  if (\"subscribe\" in producer) {\n    const unsub = producer.subscribe(v => set(() => v));\n    onCleanup(() => \"unsubscribe\" in unsub ? unsub.unsubscribe() : unsub());\n  } else {\n    const clean = producer(set);\n    onCleanup(clean);\n  }\n  return s;\n}\n\nconst FALLBACK = Symbol(\"fallback\");\nfunction dispose(d) {\n  for (let i = 0; i < d.length; i++) d[i]();\n}\nfunction mapArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    len = 0,\n    indexes = mapFn.length > 1 ? [] : null;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    let newItems = list() || [],\n      i,\n      j;\n    newItems[$TRACK];\n    return untrack(() => {\n      let newLen = newItems.length,\n        newIndices,\n        newIndicesNext,\n        temp,\n        tempdisposers,\n        tempIndexes,\n        start,\n        end,\n        newEnd,\n        item;\n      if (newLen === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          indexes && (indexes = []);\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n      }\n      else if (len === 0) {\n        mapped = new Array(newLen);\n        for (j = 0; j < newLen; j++) {\n          items[j] = newItems[j];\n          mapped[j] = createRoot(mapper);\n        }\n        len = newLen;\n      } else {\n        temp = new Array(newLen);\n        tempdisposers = new Array(newLen);\n        indexes && (tempIndexes = new Array(newLen));\n        for (start = 0, end = Math.min(len, newLen); start < end && items[start] === newItems[start]; start++);\n        for (end = len - 1, newEnd = newLen - 1; end >= start && newEnd >= start && items[end] === newItems[newEnd]; end--, newEnd--) {\n          temp[newEnd] = mapped[end];\n          tempdisposers[newEnd] = disposers[end];\n          indexes && (tempIndexes[newEnd] = indexes[end]);\n        }\n        newIndices = new Map();\n        newIndicesNext = new Array(newEnd + 1);\n        for (j = newEnd; j >= start; j--) {\n          item = newItems[j];\n          i = newIndices.get(item);\n          newIndicesNext[j] = i === undefined ? -1 : i;\n          newIndices.set(item, j);\n        }\n        for (i = start; i <= end; i++) {\n          item = items[i];\n          j = newIndices.get(item);\n          if (j !== undefined && j !== -1) {\n            temp[j] = mapped[i];\n            tempdisposers[j] = disposers[i];\n            indexes && (tempIndexes[j] = indexes[i]);\n            j = newIndicesNext[j];\n            newIndices.set(item, j);\n          } else disposers[i]();\n        }\n        for (j = start; j < newLen; j++) {\n          if (j in temp) {\n            mapped[j] = temp[j];\n            disposers[j] = tempdisposers[j];\n            if (indexes) {\n              indexes[j] = tempIndexes[j];\n              indexes[j](j);\n            }\n          } else mapped[j] = createRoot(mapper);\n        }\n        mapped = mapped.slice(0, len = newLen);\n        items = newItems.slice(0);\n      }\n      return mapped;\n    });\n    function mapper(disposer) {\n      disposers[j] = disposer;\n      if (indexes) {\n        const [s, set] = createSignal(j);\n        indexes[j] = set;\n        return mapFn(newItems[j], s);\n      }\n      return mapFn(newItems[j]);\n    }\n  };\n}\nfunction indexArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    signals = [],\n    len = 0,\n    i;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    const newItems = list() || [];\n    newItems[$TRACK];\n    return untrack(() => {\n      if (newItems.length === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          signals = [];\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n        return mapped;\n      }\n      if (items[0] === FALLBACK) {\n        disposers[0]();\n        disposers = [];\n        items = [];\n        mapped = [];\n        len = 0;\n      }\n      for (i = 0; i < newItems.length; i++) {\n        if (i < items.length && items[i] !== newItems[i]) {\n          signals[i](() => newItems[i]);\n        } else if (i >= items.length) {\n          mapped[i] = createRoot(mapper);\n        }\n      }\n      for (; i < items.length; i++) {\n        disposers[i]();\n      }\n      len = signals.length = disposers.length = newItems.length;\n      items = newItems.slice(0);\n      return mapped = mapped.slice(0, len);\n    });\n    function mapper(disposer) {\n      disposers[i] = disposer;\n      const [s, set] = createSignal(newItems[i]);\n      signals[i] = set;\n      return mapFn(s, i);\n    }\n  };\n}\n\nlet hydrationEnabled = false;\nfunction enableHydration() {\n  hydrationEnabled = true;\n}\nfunction createComponent(Comp, props) {\n  if (hydrationEnabled) {\n    if (sharedConfig.context) {\n      const c = sharedConfig.context;\n      setHydrateContext(nextHydrateContext());\n      const r = untrack(() => Comp(props || {}));\n      setHydrateContext(c);\n      return r;\n    }\n  }\n  return untrack(() => Comp(props || {}));\n}\nfunction trueFn() {\n  return true;\n}\nconst propTraps = {\n  get(_, property, receiver) {\n    if (property === $PROXY) return receiver;\n    return _.get(property);\n  },\n  has(_, property) {\n    if (property === $PROXY) return true;\n    return _.has(property);\n  },\n  set: trueFn,\n  deleteProperty: trueFn,\n  getOwnPropertyDescriptor(_, property) {\n    return {\n      configurable: true,\n      enumerable: true,\n      get() {\n        return _.get(property);\n      },\n      set: trueFn,\n      deleteProperty: trueFn\n    };\n  },\n  ownKeys(_) {\n    return _.keys();\n  }\n};\nfunction resolveSource(s) {\n  return !(s = typeof s === \"function\" ? s() : s) ? {} : s;\n}\nfunction resolveSources() {\n  for (let i = 0, length = this.length; i < length; ++i) {\n    const v = this[i]();\n    if (v !== undefined) return v;\n  }\n}\nfunction mergeProps(...sources) {\n  let proxy = false;\n  for (let i = 0; i < sources.length; i++) {\n    const s = sources[i];\n    proxy = proxy || !!s && $PROXY in s;\n    sources[i] = typeof s === \"function\" ? (proxy = true, createMemo(s)) : s;\n  }\n  if (proxy) {\n    return new Proxy({\n      get(property) {\n        for (let i = sources.length - 1; i >= 0; i--) {\n          const v = resolveSource(sources[i])[property];\n          if (v !== undefined) return v;\n        }\n      },\n      has(property) {\n        for (let i = sources.length - 1; i >= 0; i--) {\n          if (property in resolveSource(sources[i])) return true;\n        }\n        return false;\n      },\n      keys() {\n        const keys = [];\n        for (let i = 0; i < sources.length; i++) keys.push(...Object.keys(resolveSource(sources[i])));\n        return [...new Set(keys)];\n      }\n    }, propTraps);\n  }\n  const target = {};\n  const sourcesMap = {};\n  const defined = new Set();\n  for (let i = sources.length - 1; i >= 0; i--) {\n    const source = sources[i];\n    if (!source) continue;\n    const sourceKeys = Object.getOwnPropertyNames(source);\n    for (let i = 0, length = sourceKeys.length; i < length; i++) {\n      const key = sourceKeys[i];\n      if (key === \"__proto__\" || key === \"constructor\") continue;\n      const desc = Object.getOwnPropertyDescriptor(source, key);\n      if (!defined.has(key)) {\n        if (desc.get) {\n          defined.add(key);\n          Object.defineProperty(target, key, {\n            enumerable: true,\n            configurable: true,\n            get: resolveSources.bind(sourcesMap[key] = [desc.get.bind(source)])\n          });\n        } else {\n          if (desc.value !== undefined) defined.add(key);\n          target[key] = desc.value;\n        }\n      } else {\n        const sources = sourcesMap[key];\n        if (sources) {\n          if (desc.get) {\n            sources.push(desc.get.bind(source));\n          } else if (desc.value !== undefined) {\n            sources.push(() => desc.value);\n          }\n        } else if (target[key] === undefined) target[key] = desc.value;\n      }\n    }\n  }\n  return target;\n}\nfunction splitProps(props, ...keys) {\n  if ($PROXY in props) {\n    const blocked = new Set(keys.length > 1 ? keys.flat() : keys[0]);\n    const res = keys.map(k => {\n      return new Proxy({\n        get(property) {\n          return k.includes(property) ? props[property] : undefined;\n        },\n        has(property) {\n          return k.includes(property) && property in props;\n        },\n        keys() {\n          return k.filter(property => property in props);\n        }\n      }, propTraps);\n    });\n    res.push(new Proxy({\n      get(property) {\n        return blocked.has(property) ? undefined : props[property];\n      },\n      has(property) {\n        return blocked.has(property) ? false : property in props;\n      },\n      keys() {\n        return Object.keys(props).filter(k => !blocked.has(k));\n      }\n    }, propTraps));\n    return res;\n  }\n  const otherObject = {};\n  const objects = keys.map(() => ({}));\n  for (const propName of Object.getOwnPropertyNames(props)) {\n    const desc = Object.getOwnPropertyDescriptor(props, propName);\n    const isDefaultDesc = !desc.get && !desc.set && desc.enumerable && desc.writable && desc.configurable;\n    let blocked = false;\n    let objectIndex = 0;\n    for (const k of keys) {\n      if (k.includes(propName)) {\n        blocked = true;\n        isDefaultDesc ? objects[objectIndex][propName] = desc.value : Object.defineProperty(objects[objectIndex], propName, desc);\n      }\n      ++objectIndex;\n    }\n    if (!blocked) {\n      isDefaultDesc ? otherObject[propName] = desc.value : Object.defineProperty(otherObject, propName, desc);\n    }\n  }\n  return [...objects, otherObject];\n}\nfunction lazy(fn) {\n  let comp;\n  let p;\n  const wrap = props => {\n    const ctx = sharedConfig.context;\n    if (ctx) {\n      const [s, set] = createSignal();\n      sharedConfig.count || (sharedConfig.count = 0);\n      sharedConfig.count++;\n      (p || (p = fn())).then(mod => {\n        setHydrateContext(ctx);\n        sharedConfig.count--;\n        set(() => mod.default);\n        setHydrateContext();\n      });\n      comp = s;\n    } else if (!comp) {\n      const [s] = createResource(() => (p || (p = fn())).then(mod => mod.default));\n      comp = s;\n    }\n    let Comp;\n    return createMemo(() => (Comp = comp()) && untrack(() => {\n      if (false) ;\n      if (!ctx) return Comp(props);\n      const c = sharedConfig.context;\n      setHydrateContext(ctx);\n      const r = Comp(props);\n      setHydrateContext(c);\n      return r;\n    }));\n  };\n  wrap.preload = () => p || ((p = fn()).then(mod => comp = () => mod.default), p);\n  return wrap;\n}\nlet counter = 0;\nfunction createUniqueId() {\n  const ctx = sharedConfig.context;\n  return ctx ? `${ctx.id}${ctx.count++}` : `cl-${counter++}`;\n}\n\nconst narrowedError = name => `Stale read from <${name}>.`;\nfunction For(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(mapArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Index(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(indexArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Show(props) {\n  const keyed = props.keyed;\n  const condition = createMemo(() => props.when, undefined, {\n    equals: (a, b) => keyed ? a === b : !a === !b\n  });\n  return createMemo(() => {\n    const c = condition();\n    if (c) {\n      const child = props.children;\n      const fn = typeof child === \"function\" && child.length > 0;\n      return fn ? untrack(() => child(keyed ? c : () => {\n        if (!untrack(condition)) throw narrowedError(\"Show\");\n        return props.when;\n      })) : child;\n    }\n    return props.fallback;\n  }, undefined, undefined);\n}\nfunction Switch(props) {\n  let keyed = false;\n  const equals = (a, b) => a[0] === b[0] && (keyed ? a[1] === b[1] : !a[1] === !b[1]) && a[2] === b[2];\n  const conditions = children(() => props.children),\n    evalConditions = createMemo(() => {\n      let conds = conditions();\n      if (!Array.isArray(conds)) conds = [conds];\n      for (let i = 0; i < conds.length; i++) {\n        const c = conds[i].when;\n        if (c) {\n          keyed = !!conds[i].keyed;\n          return [i, c, conds[i]];\n        }\n      }\n      return [-1];\n    }, undefined, {\n      equals\n    });\n  return createMemo(() => {\n    const [index, when, cond] = evalConditions();\n    if (index < 0) return props.fallback;\n    const c = cond.children;\n    const fn = typeof c === \"function\" && c.length > 0;\n    return fn ? untrack(() => c(keyed ? when : () => {\n      if (untrack(evalConditions)[0] !== index) throw narrowedError(\"Match\");\n      return cond.when;\n    })) : c;\n  }, undefined, undefined);\n}\nfunction Match(props) {\n  return props;\n}\nlet Errors;\nfunction resetErrorBoundaries() {\n  Errors && [...Errors].forEach(fn => fn());\n}\nfunction ErrorBoundary(props) {\n  let err;\n  let v;\n  if (sharedConfig.context && sharedConfig.load && (v = sharedConfig.load(sharedConfig.context.id + sharedConfig.context.count))) err = v[0];\n  const [errored, setErrored] = createSignal(err, undefined);\n  Errors || (Errors = new Set());\n  Errors.add(setErrored);\n  onCleanup(() => Errors.delete(setErrored));\n  return createMemo(() => {\n    let e;\n    if (e = errored()) {\n      const f = props.fallback;\n      return typeof f === \"function\" && f.length ? untrack(() => f(e, () => setErrored())) : f;\n    }\n    return catchError(() => props.children, setErrored);\n  }, undefined, undefined);\n}\n\nconst suspenseListEquals = (a, b) => a.showContent === b.showContent && a.showFallback === b.showFallback;\nconst SuspenseListContext = createContext();\nfunction SuspenseList(props) {\n  let [wrapper, setWrapper] = createSignal(() => ({\n      inFallback: false\n    })),\n    show;\n  const listContext = useContext(SuspenseListContext);\n  const [registry, setRegistry] = createSignal([]);\n  if (listContext) {\n    show = listContext.register(createMemo(() => wrapper()().inFallback));\n  }\n  const resolved = createMemo(prev => {\n    const reveal = props.revealOrder,\n      tail = props.tail,\n      {\n        showContent = true,\n        showFallback = true\n      } = show ? show() : {},\n      reg = registry(),\n      reverse = reveal === \"backwards\";\n    if (reveal === \"together\") {\n      const all = reg.every(inFallback => !inFallback());\n      const res = reg.map(() => ({\n        showContent: all && showContent,\n        showFallback\n      }));\n      res.inFallback = !all;\n      return res;\n    }\n    let stop = false;\n    let inFallback = prev.inFallback;\n    const res = [];\n    for (let i = 0, len = reg.length; i < len; i++) {\n      const n = reverse ? len - i - 1 : i,\n        s = reg[n]();\n      if (!stop && !s) {\n        res[n] = {\n          showContent,\n          showFallback\n        };\n      } else {\n        const next = !stop;\n        if (next) inFallback = true;\n        res[n] = {\n          showContent: next,\n          showFallback: !tail || next && tail === \"collapsed\" ? showFallback : false\n        };\n        stop = true;\n      }\n    }\n    if (!stop) inFallback = false;\n    res.inFallback = inFallback;\n    return res;\n  }, {\n    inFallback: false\n  });\n  setWrapper(() => resolved);\n  return createComponent(SuspenseListContext.Provider, {\n    value: {\n      register: inFallback => {\n        let index;\n        setRegistry(registry => {\n          index = registry.length;\n          return [...registry, inFallback];\n        });\n        return createMemo(() => resolved()[index], undefined, {\n          equals: suspenseListEquals\n        });\n      }\n    },\n    get children() {\n      return props.children;\n    }\n  });\n}\nfunction Suspense(props) {\n  let counter = 0,\n    show,\n    ctx,\n    p,\n    flicker,\n    error;\n  const [inFallback, setFallback] = createSignal(false),\n    SuspenseContext = getSuspenseContext(),\n    store = {\n      increment: () => {\n        if (++counter === 1) setFallback(true);\n      },\n      decrement: () => {\n        if (--counter === 0) setFallback(false);\n      },\n      inFallback,\n      effects: [],\n      resolved: false\n    },\n    owner = getOwner();\n  if (sharedConfig.context && sharedConfig.load) {\n    const key = sharedConfig.context.id + sharedConfig.context.count;\n    let ref = sharedConfig.load(key);\n    if (ref && (p = ref[0]) && p !== \"$$f\") {\n      if (typeof p !== \"object\" || !(\"then\" in p)) p = Promise.resolve(p);\n      const [s, set] = createSignal(undefined, {\n        equals: false\n      });\n      flicker = s;\n      p.then(err => {\n        if (err || sharedConfig.done) {\n          err && (error = err);\n          return set();\n        }\n        sharedConfig.gather(key);\n        setHydrateContext(ctx);\n        set();\n        setHydrateContext();\n      });\n    }\n  }\n  const listContext = useContext(SuspenseListContext);\n  if (listContext) show = listContext.register(store.inFallback);\n  let dispose;\n  onCleanup(() => dispose && dispose());\n  return createComponent(SuspenseContext.Provider, {\n    value: store,\n    get children() {\n      return createMemo(() => {\n        if (error) throw error;\n        ctx = sharedConfig.context;\n        if (flicker) {\n          flicker();\n          return flicker = undefined;\n        }\n        if (ctx && p === \"$$f\") setHydrateContext();\n        const rendered = createMemo(() => props.children);\n        return createMemo(prev => {\n          const inFallback = store.inFallback(),\n            {\n              showContent = true,\n              showFallback = true\n            } = show ? show() : {};\n          if ((!inFallback || p && p !== \"$$f\") && showContent) {\n            store.resolved = true;\n            dispose && dispose();\n            dispose = ctx = p = undefined;\n            resumeEffects(store.effects);\n            return rendered();\n          }\n          if (!showFallback) return;\n          if (dispose) return prev;\n          return createRoot(disposer => {\n            dispose = disposer;\n            if (ctx) {\n              setHydrateContext({\n                id: ctx.id + \"f\",\n                count: 0\n              });\n              ctx = undefined;\n            }\n            return props.fallback;\n          }, owner);\n        });\n      });\n    }\n  });\n}\n\nconst DEV = undefined;\n\nexport { $DEVCOMP, $PROXY, $TRACK, DEV, ErrorBoundary, For, Index, Match, Show, Suspense, SuspenseList, Switch, batch, cancelCallback, catchError, children, createComponent, createComputed, createContext, createDeferred, createEffect, createMemo, createReaction, createRenderEffect, createResource, createRoot, createSelector, createSignal, createUniqueId, enableExternalSource, enableHydration, enableScheduling, equalFn, from, getListener, getOwner, indexArray, lazy, mapArray, mergeProps, observable, on, onCleanup, onError, onMount, requestCallback, resetErrorBoundaries, runWithOwner, sharedConfig, splitProps, startTransition, untrack, useContext, useTransition };\n","import { createRoot, createRenderEffect, sharedConfig, untrack, enableHydration, getOwner, createEffect, runWithOwner, createMemo, createSignal, onCleanup, splitProps, $DEVCOMP } from 'solid-js';\nexport { ErrorBoundary, For, Index, Match, Show, Suspense, SuspenseList, Switch, createComponent, createRenderEffect as effect, getOwner, createMemo as memo, mergeProps, untrack } from 'solid-js';\n\nconst booleans = [\"allowfullscreen\", \"async\", \"autofocus\", \"autoplay\", \"checked\", \"controls\", \"default\", \"disabled\", \"formnovalidate\", \"hidden\", \"indeterminate\", \"ismap\", \"loop\", \"multiple\", \"muted\", \"nomodule\", \"novalidate\", \"open\", \"playsinline\", \"readonly\", \"required\", \"reversed\", \"seamless\", \"selected\"];\nconst Properties = /*#__PURE__*/new Set([\"className\", \"value\", \"readOnly\", \"formNoValidate\", \"isMap\", \"noModule\", \"playsInline\", ...booleans]);\nconst ChildProperties = /*#__PURE__*/new Set([\"innerHTML\", \"textContent\", \"innerText\", \"children\"]);\nconst Aliases = /*#__PURE__*/Object.assign(Object.create(null), {\n  className: \"class\",\n  htmlFor: \"for\"\n});\nconst PropAliases = /*#__PURE__*/Object.assign(Object.create(null), {\n  class: \"className\",\n  formnovalidate: {\n    $: \"formNoValidate\",\n    BUTTON: 1,\n    INPUT: 1\n  },\n  ismap: {\n    $: \"isMap\",\n    IMG: 1\n  },\n  nomodule: {\n    $: \"noModule\",\n    SCRIPT: 1\n  },\n  playsinline: {\n    $: \"playsInline\",\n    VIDEO: 1\n  },\n  readonly: {\n    $: \"readOnly\",\n    INPUT: 1,\n    TEXTAREA: 1\n  }\n});\nfunction getPropAlias(prop, tagName) {\n  const a = PropAliases[prop];\n  return typeof a === \"object\" ? a[tagName] ? a[\"$\"] : undefined : a;\n}\nconst DelegatedEvents = /*#__PURE__*/new Set([\"beforeinput\", \"click\", \"dblclick\", \"contextmenu\", \"focusin\", \"focusout\", \"input\", \"keydown\", \"keyup\", \"mousedown\", \"mousemove\", \"mouseout\", \"mouseover\", \"mouseup\", \"pointerdown\", \"pointermove\", \"pointerout\", \"pointerover\", \"pointerup\", \"touchend\", \"touchmove\", \"touchstart\"]);\nconst SVGElements = /*#__PURE__*/new Set([\n\"altGlyph\", \"altGlyphDef\", \"altGlyphItem\", \"animate\", \"animateColor\", \"animateMotion\", \"animateTransform\", \"circle\", \"clipPath\", \"color-profile\", \"cursor\", \"defs\", \"desc\", \"ellipse\", \"feBlend\", \"feColorMatrix\", \"feComponentTransfer\", \"feComposite\", \"feConvolveMatrix\", \"feDiffuseLighting\", \"feDisplacementMap\", \"feDistantLight\", \"feFlood\", \"feFuncA\", \"feFuncB\", \"feFuncG\", \"feFuncR\", \"feGaussianBlur\", \"feImage\", \"feMerge\", \"feMergeNode\", \"feMorphology\", \"feOffset\", \"fePointLight\", \"feSpecularLighting\", \"feSpotLight\", \"feTile\", \"feTurbulence\", \"filter\", \"font\", \"font-face\", \"font-face-format\", \"font-face-name\", \"font-face-src\", \"font-face-uri\", \"foreignObject\", \"g\", \"glyph\", \"glyphRef\", \"hkern\", \"image\", \"line\", \"linearGradient\", \"marker\", \"mask\", \"metadata\", \"missing-glyph\", \"mpath\", \"path\", \"pattern\", \"polygon\", \"polyline\", \"radialGradient\", \"rect\",\n\"set\", \"stop\",\n\"svg\", \"switch\", \"symbol\", \"text\", \"textPath\",\n\"tref\", \"tspan\", \"use\", \"view\", \"vkern\"]);\nconst SVGNamespace = {\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\"\n};\nconst DOMElements = /*#__PURE__*/new Set([\"html\", \"base\", \"head\", \"link\", \"meta\", \"style\", \"title\", \"body\", \"address\", \"article\", \"aside\", \"footer\", \"header\", \"main\", \"nav\", \"section\", \"body\", \"blockquote\", \"dd\", \"div\", \"dl\", \"dt\", \"figcaption\", \"figure\", \"hr\", \"li\", \"ol\", \"p\", \"pre\", \"ul\", \"a\", \"abbr\", \"b\", \"bdi\", \"bdo\", \"br\", \"cite\", \"code\", \"data\", \"dfn\", \"em\", \"i\", \"kbd\", \"mark\", \"q\", \"rp\", \"rt\", \"ruby\", \"s\", \"samp\", \"small\", \"span\", \"strong\", \"sub\", \"sup\", \"time\", \"u\", \"var\", \"wbr\", \"area\", \"audio\", \"img\", \"map\", \"track\", \"video\", \"embed\", \"iframe\", \"object\", \"param\", \"picture\", \"portal\", \"source\", \"svg\", \"math\", \"canvas\", \"noscript\", \"script\", \"del\", \"ins\", \"caption\", \"col\", \"colgroup\", \"table\", \"tbody\", \"td\", \"tfoot\", \"th\", \"thead\", \"tr\", \"button\", \"datalist\", \"fieldset\", \"form\", \"input\", \"label\", \"legend\", \"meter\", \"optgroup\", \"option\", \"output\", \"progress\", \"select\", \"textarea\", \"details\", \"dialog\", \"menu\", \"summary\", \"details\", \"slot\", \"template\", \"acronym\", \"applet\", \"basefont\", \"bgsound\", \"big\", \"blink\", \"center\", \"content\", \"dir\", \"font\", \"frame\", \"frameset\", \"hgroup\", \"image\", \"keygen\", \"marquee\", \"menuitem\", \"nobr\", \"noembed\", \"noframes\", \"plaintext\", \"rb\", \"rtc\", \"shadow\", \"spacer\", \"strike\", \"tt\", \"xmp\", \"a\", \"abbr\", \"acronym\", \"address\", \"applet\", \"area\", \"article\", \"aside\", \"audio\", \"b\", \"base\", \"basefont\", \"bdi\", \"bdo\", \"bgsound\", \"big\", \"blink\", \"blockquote\", \"body\", \"br\", \"button\", \"canvas\", \"caption\", \"center\", \"cite\", \"code\", \"col\", \"colgroup\", \"content\", \"data\", \"datalist\", \"dd\", \"del\", \"details\", \"dfn\", \"dialog\", \"dir\", \"div\", \"dl\", \"dt\", \"em\", \"embed\", \"fieldset\", \"figcaption\", \"figure\", \"font\", \"footer\", \"form\", \"frame\", \"frameset\", \"head\", \"header\", \"hgroup\", \"hr\", \"html\", \"i\", \"iframe\", \"image\", \"img\", \"input\", \"ins\", \"kbd\", \"keygen\", \"label\", \"legend\", \"li\", \"link\", \"main\", \"map\", \"mark\", \"marquee\", \"menu\", \"menuitem\", \"meta\", \"meter\", \"nav\", \"nobr\", \"noembed\", \"noframes\", \"noscript\", \"object\", \"ol\", \"optgroup\", \"option\", \"output\", \"p\", \"param\", \"picture\", \"plaintext\", \"portal\", \"pre\", \"progress\", \"q\", \"rb\", \"rp\", \"rt\", \"rtc\", \"ruby\", \"s\", \"samp\", \"script\", \"section\", \"select\", \"shadow\", \"slot\", \"small\", \"source\", \"spacer\", \"span\", \"strike\", \"strong\", \"style\", \"sub\", \"summary\", \"sup\", \"table\", \"tbody\", \"td\", \"template\", \"textarea\", \"tfoot\", \"th\", \"thead\", \"time\", \"title\", \"tr\", \"track\", \"tt\", \"u\", \"ul\", \"var\", \"video\", \"wbr\", \"xmp\", \"input\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"]);\n\nfunction reconcileArrays(parentNode, a, b) {\n  let bLength = b.length,\n    aEnd = a.length,\n    bEnd = bLength,\n    aStart = 0,\n    bStart = 0,\n    after = a[aEnd - 1].nextSibling,\n    map = null;\n  while (aStart < aEnd || bStart < bEnd) {\n    if (a[aStart] === b[bStart]) {\n      aStart++;\n      bStart++;\n      continue;\n    }\n    while (a[aEnd - 1] === b[bEnd - 1]) {\n      aEnd--;\n      bEnd--;\n    }\n    if (aEnd === aStart) {\n      const node = bEnd < bLength ? bStart ? b[bStart - 1].nextSibling : b[bEnd - bStart] : after;\n      while (bStart < bEnd) parentNode.insertBefore(b[bStart++], node);\n    } else if (bEnd === bStart) {\n      while (aStart < aEnd) {\n        if (!map || !map.has(a[aStart])) a[aStart].remove();\n        aStart++;\n      }\n    } else if (a[aStart] === b[bEnd - 1] && b[bStart] === a[aEnd - 1]) {\n      const node = a[--aEnd].nextSibling;\n      parentNode.insertBefore(b[bStart++], a[aStart++].nextSibling);\n      parentNode.insertBefore(b[--bEnd], node);\n      a[aEnd] = b[bEnd];\n    } else {\n      if (!map) {\n        map = new Map();\n        let i = bStart;\n        while (i < bEnd) map.set(b[i], i++);\n      }\n      const index = map.get(a[aStart]);\n      if (index != null) {\n        if (bStart < index && index < bEnd) {\n          let i = aStart,\n            sequence = 1,\n            t;\n          while (++i < aEnd && i < bEnd) {\n            if ((t = map.get(a[i])) == null || t !== index + sequence) break;\n            sequence++;\n          }\n          if (sequence > index - bStart) {\n            const node = a[aStart];\n            while (bStart < index) parentNode.insertBefore(b[bStart++], node);\n          } else parentNode.replaceChild(b[bStart++], a[aStart++]);\n        } else aStart++;\n      } else a[aStart++].remove();\n    }\n  }\n}\n\nconst $$EVENTS = \"_$DX_DELEGATE\";\nfunction render(code, element, init, options = {}) {\n  let disposer;\n  createRoot(dispose => {\n    disposer = dispose;\n    element === document ? code() : insert(element, code(), element.firstChild ? null : undefined, init);\n  }, options.owner);\n  return () => {\n    disposer();\n    element.textContent = \"\";\n  };\n}\nfunction template(html, isCE, isSVG) {\n  let node;\n  const create = () => {\n    const t = document.createElement(\"template\");\n    t.innerHTML = html;\n    return isSVG ? t.content.firstChild.firstChild : t.content.firstChild;\n  };\n  const fn = isCE ? () => untrack(() => document.importNode(node || (node = create()), true)) : () => (node || (node = create())).cloneNode(true);\n  fn.cloneNode = fn;\n  return fn;\n}\nfunction delegateEvents(eventNames, document = window.document) {\n  const e = document[$$EVENTS] || (document[$$EVENTS] = new Set());\n  for (let i = 0, l = eventNames.length; i < l; i++) {\n    const name = eventNames[i];\n    if (!e.has(name)) {\n      e.add(name);\n      document.addEventListener(name, eventHandler);\n    }\n  }\n}\nfunction clearDelegatedEvents(document = window.document) {\n  if (document[$$EVENTS]) {\n    for (let name of document[$$EVENTS].keys()) document.removeEventListener(name, eventHandler);\n    delete document[$$EVENTS];\n  }\n}\nfunction setAttribute(node, name, value) {\n  if (value == null) node.removeAttribute(name);else node.setAttribute(name, value);\n}\nfunction setAttributeNS(node, namespace, name, value) {\n  if (value == null) node.removeAttributeNS(namespace, name);else node.setAttributeNS(namespace, name, value);\n}\nfunction className(node, value) {\n  if (value == null) node.removeAttribute(\"class\");else node.className = value;\n}\nfunction addEventListener(node, name, handler, delegate) {\n  if (delegate) {\n    if (Array.isArray(handler)) {\n      node[`$$${name}`] = handler[0];\n      node[`$$${name}Data`] = handler[1];\n    } else node[`$$${name}`] = handler;\n  } else if (Array.isArray(handler)) {\n    const handlerFn = handler[0];\n    node.addEventListener(name, handler[0] = e => handlerFn.call(node, handler[1], e));\n  } else node.addEventListener(name, handler);\n}\nfunction classList(node, value, prev = {}) {\n  const classKeys = Object.keys(value || {}),\n    prevKeys = Object.keys(prev);\n  let i, len;\n  for (i = 0, len = prevKeys.length; i < len; i++) {\n    const key = prevKeys[i];\n    if (!key || key === \"undefined\" || value[key]) continue;\n    toggleClassKey(node, key, false);\n    delete prev[key];\n  }\n  for (i = 0, len = classKeys.length; i < len; i++) {\n    const key = classKeys[i],\n      classValue = !!value[key];\n    if (!key || key === \"undefined\" || prev[key] === classValue || !classValue) continue;\n    toggleClassKey(node, key, true);\n    prev[key] = classValue;\n  }\n  return prev;\n}\nfunction style(node, value, prev) {\n  if (!value) return prev ? setAttribute(node, \"style\") : value;\n  const nodeStyle = node.style;\n  if (typeof value === \"string\") return nodeStyle.cssText = value;\n  typeof prev === \"string\" && (nodeStyle.cssText = prev = undefined);\n  prev || (prev = {});\n  value || (value = {});\n  let v, s;\n  for (s in prev) {\n    value[s] == null && nodeStyle.removeProperty(s);\n    delete prev[s];\n  }\n  for (s in value) {\n    v = value[s];\n    if (v !== prev[s]) {\n      nodeStyle.setProperty(s, v);\n      prev[s] = v;\n    }\n  }\n  return prev;\n}\nfunction spread(node, props = {}, isSVG, skipChildren) {\n  const prevProps = {};\n  if (!skipChildren) {\n    createRenderEffect(() => prevProps.children = insertExpression(node, props.children, prevProps.children));\n  }\n  createRenderEffect(() => props.ref && props.ref(node));\n  createRenderEffect(() => assign(node, props, isSVG, true, prevProps, true));\n  return prevProps;\n}\nfunction dynamicProperty(props, key) {\n  const src = props[key];\n  Object.defineProperty(props, key, {\n    get() {\n      return src();\n    },\n    enumerable: true\n  });\n  return props;\n}\nfunction innerHTML(parent, content) {\n  !sharedConfig.context && (parent.innerHTML = content);\n}\nfunction use(fn, element, arg) {\n  return untrack(() => fn(element, arg));\n}\nfunction insert(parent, accessor, marker, initial) {\n  if (marker !== undefined && !initial) initial = [];\n  if (typeof accessor !== \"function\") return insertExpression(parent, accessor, initial, marker);\n  createRenderEffect(current => insertExpression(parent, accessor(), current, marker), initial);\n}\nfunction assign(node, props, isSVG, skipChildren, prevProps = {}, skipRef = false) {\n  props || (props = {});\n  for (const prop in prevProps) {\n    if (!(prop in props)) {\n      if (prop === \"children\") continue;\n      prevProps[prop] = assignProp(node, prop, null, prevProps[prop], isSVG, skipRef);\n    }\n  }\n  for (const prop in props) {\n    if (prop === \"children\") {\n      if (!skipChildren) insertExpression(node, props.children);\n      continue;\n    }\n    const value = props[prop];\n    prevProps[prop] = assignProp(node, prop, value, prevProps[prop], isSVG, skipRef);\n  }\n}\nfunction hydrate$1(code, element, options = {}) {\n  sharedConfig.completed = globalThis._$HY.completed;\n  sharedConfig.events = globalThis._$HY.events;\n  sharedConfig.load = globalThis._$HY.load;\n  sharedConfig.gather = root => gatherHydratable(element, root);\n  sharedConfig.registry = new Map();\n  sharedConfig.context = {\n    id: options.renderId || \"\",\n    count: 0\n  };\n  gatherHydratable(element, options.renderId);\n  const dispose = render(code, element, [...element.childNodes], options);\n  sharedConfig.context = null;\n  return dispose;\n}\nfunction getNextElement(template) {\n  let node, key;\n  if (!sharedConfig.context || !(node = sharedConfig.registry.get(key = getHydrationKey()))) {\n    if (sharedConfig.context) console.warn(\"Unable to find DOM nodes for hydration key:\", key);\n    if (!template) throw new Error(\"Unrecoverable Hydration Mismatch. No template for key: \" + key);\n    return template();\n  }\n  if (sharedConfig.completed) sharedConfig.completed.add(node);\n  sharedConfig.registry.delete(key);\n  return node;\n}\nfunction getNextMatch(el, nodeName) {\n  while (el && el.localName !== nodeName) el = el.nextSibling;\n  return el;\n}\nfunction getNextMarker(start) {\n  let end = start,\n    count = 0,\n    current = [];\n  if (sharedConfig.context) {\n    while (end) {\n      if (end.nodeType === 8) {\n        const v = end.nodeValue;\n        if (v === \"#\") count++;else if (v === \"/\") {\n          if (count === 0) return [end, current];\n          count--;\n        }\n      }\n      current.push(end);\n      end = end.nextSibling;\n    }\n  }\n  return [end, current];\n}\nfunction runHydrationEvents() {\n  if (sharedConfig.events && !sharedConfig.events.queued) {\n    queueMicrotask(() => {\n      const {\n        completed,\n        events\n      } = sharedConfig;\n      events.queued = false;\n      while (events.length) {\n        const [el, e] = events[0];\n        if (!completed.has(el)) return;\n        eventHandler(e);\n        events.shift();\n      }\n    });\n    sharedConfig.events.queued = true;\n  }\n}\nfunction toPropertyName(name) {\n  return name.toLowerCase().replace(/-([a-z])/g, (_, w) => w.toUpperCase());\n}\nfunction toggleClassKey(node, key, value) {\n  const classNames = key.trim().split(/\\s+/);\n  for (let i = 0, nameLen = classNames.length; i < nameLen; i++) node.classList.toggle(classNames[i], value);\n}\nfunction assignProp(node, prop, value, prev, isSVG, skipRef) {\n  let isCE, isProp, isChildProp, propAlias, forceProp;\n  if (prop === \"style\") return style(node, value, prev);\n  if (prop === \"classList\") return classList(node, value, prev);\n  if (value === prev) return prev;\n  if (prop === \"ref\") {\n    if (!skipRef) value(node);\n  } else if (prop.slice(0, 3) === \"on:\") {\n    const e = prop.slice(3);\n    prev && node.removeEventListener(e, prev);\n    value && node.addEventListener(e, value);\n  } else if (prop.slice(0, 10) === \"oncapture:\") {\n    const e = prop.slice(10);\n    prev && node.removeEventListener(e, prev, true);\n    value && node.addEventListener(e, value, true);\n  } else if (prop.slice(0, 2) === \"on\") {\n    const name = prop.slice(2).toLowerCase();\n    const delegate = DelegatedEvents.has(name);\n    if (!delegate && prev) {\n      const h = Array.isArray(prev) ? prev[0] : prev;\n      node.removeEventListener(name, h);\n    }\n    if (delegate || value) {\n      addEventListener(node, name, value, delegate);\n      delegate && delegateEvents([name]);\n    }\n  } else if (prop.slice(0, 5) === \"attr:\") {\n    setAttribute(node, prop.slice(5), value);\n  } else if ((forceProp = prop.slice(0, 5) === \"prop:\") || (isChildProp = ChildProperties.has(prop)) || !isSVG && ((propAlias = getPropAlias(prop, node.tagName)) || (isProp = Properties.has(prop))) || (isCE = node.nodeName.includes(\"-\"))) {\n    if (forceProp) {\n      prop = prop.slice(5);\n      isProp = true;\n    }\n    if (prop === \"class\" || prop === \"className\") className(node, value);else if (isCE && !isProp && !isChildProp) node[toPropertyName(prop)] = value;else node[propAlias || prop] = value;\n  } else {\n    const ns = isSVG && prop.indexOf(\":\") > -1 && SVGNamespace[prop.split(\":\")[0]];\n    if (ns) setAttributeNS(node, ns, prop, value);else setAttribute(node, Aliases[prop] || prop, value);\n  }\n  return value;\n}\nfunction eventHandler(e) {\n  const key = `$$${e.type}`;\n  let node = e.composedPath && e.composedPath()[0] || e.target;\n  if (e.target !== node) {\n    Object.defineProperty(e, \"target\", {\n      configurable: true,\n      value: node\n    });\n  }\n  Object.defineProperty(e, \"currentTarget\", {\n    configurable: true,\n    get() {\n      return node || document;\n    }\n  });\n  if (sharedConfig.registry && !sharedConfig.done) sharedConfig.done = _$HY.done = true;\n  while (node) {\n    const handler = node[key];\n    if (handler && !node.disabled) {\n      const data = node[`${key}Data`];\n      data !== undefined ? handler.call(node, data, e) : handler.call(node, e);\n      if (e.cancelBubble) return;\n    }\n    node = node._$host || node.parentNode || node.host;\n  }\n}\nfunction insertExpression(parent, value, current, marker, unwrapArray) {\n  if (sharedConfig.context) {\n    !current && (current = [...parent.childNodes]);\n    let cleaned = [];\n    for (let i = 0; i < current.length; i++) {\n      const node = current[i];\n      if (node.nodeType === 8 && node.data.slice(0, 2) === \"!$\") node.remove();else cleaned.push(node);\n    }\n    current = cleaned;\n  }\n  while (typeof current === \"function\") current = current();\n  if (value === current) return current;\n  const t = typeof value,\n    multi = marker !== undefined;\n  parent = multi && current[0] && current[0].parentNode || parent;\n  if (t === \"string\" || t === \"number\") {\n    if (sharedConfig.context) return current;\n    if (t === \"number\") value = value.toString();\n    if (multi) {\n      let node = current[0];\n      if (node && node.nodeType === 3) {\n        node.data = value;\n      } else node = document.createTextNode(value);\n      current = cleanChildren(parent, current, marker, node);\n    } else {\n      if (current !== \"\" && typeof current === \"string\") {\n        current = parent.firstChild.data = value;\n      } else current = parent.textContent = value;\n    }\n  } else if (value == null || t === \"boolean\") {\n    if (sharedConfig.context) return current;\n    current = cleanChildren(parent, current, marker);\n  } else if (t === \"function\") {\n    createRenderEffect(() => {\n      let v = value();\n      while (typeof v === \"function\") v = v();\n      current = insertExpression(parent, v, current, marker);\n    });\n    return () => current;\n  } else if (Array.isArray(value)) {\n    const array = [];\n    const currentArray = current && Array.isArray(current);\n    if (normalizeIncomingArray(array, value, current, unwrapArray)) {\n      createRenderEffect(() => current = insertExpression(parent, array, current, marker, true));\n      return () => current;\n    }\n    if (sharedConfig.context) {\n      if (!array.length) return current;\n      for (let i = 0; i < array.length; i++) {\n        if (array[i].parentNode) return current = array;\n      }\n    }\n    if (array.length === 0) {\n      current = cleanChildren(parent, current, marker);\n      if (multi) return current;\n    } else if (currentArray) {\n      if (current.length === 0) {\n        appendNodes(parent, array, marker);\n      } else reconcileArrays(parent, current, array);\n    } else {\n      current && cleanChildren(parent);\n      appendNodes(parent, array);\n    }\n    current = array;\n  } else if (value.nodeType) {\n    if (sharedConfig.context && value.parentNode) return current = multi ? [value] : value;\n    if (Array.isArray(current)) {\n      if (multi) return current = cleanChildren(parent, current, marker, value);\n      cleanChildren(parent, current, null, value);\n    } else if (current == null || current === \"\" || !parent.firstChild) {\n      parent.appendChild(value);\n    } else parent.replaceChild(value, parent.firstChild);\n    current = value;\n  } else console.warn(`Unrecognized value. Skipped inserting`, value);\n  return current;\n}\nfunction normalizeIncomingArray(normalized, array, current, unwrap) {\n  let dynamic = false;\n  for (let i = 0, len = array.length; i < len; i++) {\n    let item = array[i],\n      prev = current && current[i],\n      t;\n    if (item == null || item === true || item === false) ; else if ((t = typeof item) === \"object\" && item.nodeType) {\n      normalized.push(item);\n    } else if (Array.isArray(item)) {\n      dynamic = normalizeIncomingArray(normalized, item, prev) || dynamic;\n    } else if (t === \"function\") {\n      if (unwrap) {\n        while (typeof item === \"function\") item = item();\n        dynamic = normalizeIncomingArray(normalized, Array.isArray(item) ? item : [item], Array.isArray(prev) ? prev : [prev]) || dynamic;\n      } else {\n        normalized.push(item);\n        dynamic = true;\n      }\n    } else {\n      const value = String(item);\n      if (prev && prev.nodeType === 3 && prev.data === value) normalized.push(prev);else normalized.push(document.createTextNode(value));\n    }\n  }\n  return dynamic;\n}\nfunction appendNodes(parent, array, marker = null) {\n  for (let i = 0, len = array.length; i < len; i++) parent.insertBefore(array[i], marker);\n}\nfunction cleanChildren(parent, current, marker, replacement) {\n  if (marker === undefined) return parent.textContent = \"\";\n  const node = replacement || document.createTextNode(\"\");\n  if (current.length) {\n    let inserted = false;\n    for (let i = current.length - 1; i >= 0; i--) {\n      const el = current[i];\n      if (node !== el) {\n        const isParent = el.parentNode === parent;\n        if (!inserted && !i) isParent ? parent.replaceChild(node, el) : parent.insertBefore(node, marker);else isParent && el.remove();\n      } else inserted = true;\n    }\n  } else parent.insertBefore(node, marker);\n  return [node];\n}\nfunction gatherHydratable(element, root) {\n  const templates = element.querySelectorAll(`*[data-hk]`);\n  for (let i = 0; i < templates.length; i++) {\n    const node = templates[i];\n    const key = node.getAttribute(\"data-hk\");\n    if ((!root || key.startsWith(root)) && !sharedConfig.registry.has(key)) sharedConfig.registry.set(key, node);\n  }\n}\nfunction getHydrationKey() {\n  const hydrate = sharedConfig.context;\n  return `${hydrate.id}${hydrate.count++}`;\n}\nfunction NoHydration(props) {\n  return sharedConfig.context ? undefined : props.children;\n}\nfunction Hydration(props) {\n  return props.children;\n}\nfunction voidFn() {}\n\nfunction throwInBrowser(func) {\n  const err = new Error(`${func.name} is not supported in the browser, returning undefined`);\n  console.error(err);\n}\nfunction renderToString(fn, options) {\n  throwInBrowser(renderToString);\n}\nfunction renderToStringAsync(fn, options) {\n  throwInBrowser(renderToStringAsync);\n}\nfunction renderToStream(fn, options) {\n  throwInBrowser(renderToStream);\n}\nfunction ssr(template, ...nodes) {}\nfunction ssrElement(name, props, children, needsId) {}\nfunction ssrClassList(value) {}\nfunction ssrStyle(value) {}\nfunction ssrAttribute(key, value) {}\nfunction ssrHydrationKey() {}\nfunction resolveSSRNode(node) {}\nfunction escape(html) {}\nfunction ssrSpread(props, isSVG, skipChildren) {}\n\nconst isServer = false;\nconst isDev = false;\nconst SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\nfunction createElement(tagName, isSVG = false) {\n  return isSVG ? document.createElementNS(SVG_NAMESPACE, tagName) : document.createElement(tagName);\n}\nconst hydrate = (...args) => {\n  enableHydration();\n  return hydrate$1(...args);\n};\nfunction Portal(props) {\n  const {\n      useShadow\n    } = props,\n    marker = document.createTextNode(\"\"),\n    mount = () => props.mount || document.body,\n    owner = getOwner();\n  let content;\n  let hydrating = !!sharedConfig.context;\n  createEffect(() => {\n    if (hydrating) getOwner().user = hydrating = false;\n    content || (content = runWithOwner(owner, () => createMemo(() => props.children)));\n    const el = mount();\n    if (el instanceof HTMLHeadElement) {\n      const [clean, setClean] = createSignal(false);\n      const cleanup = () => setClean(true);\n      createRoot(dispose => insert(el, () => !clean() ? content() : dispose(), null));\n      onCleanup(cleanup);\n    } else {\n      const container = createElement(props.isSVG ? \"g\" : \"div\", props.isSVG),\n        renderRoot = useShadow && container.attachShadow ? container.attachShadow({\n          mode: \"open\"\n        }) : container;\n      Object.defineProperty(container, \"_$host\", {\n        get() {\n          return marker.parentNode;\n        },\n        configurable: true\n      });\n      insert(renderRoot, content);\n      el.appendChild(container);\n      props.ref && props.ref(container);\n      onCleanup(() => el.removeChild(container));\n    }\n  }, undefined, {\n    render: !hydrating\n  });\n  return marker;\n}\nfunction Dynamic(props) {\n  const [p, others] = splitProps(props, [\"component\"]);\n  const cached = createMemo(() => p.component);\n  return createMemo(() => {\n    const component = cached();\n    switch (typeof component) {\n      case \"function\":\n        Object.assign(component, {\n          [$DEVCOMP]: true\n        });\n        return untrack(() => component(others));\n      case \"string\":\n        const isSvg = SVGElements.has(component);\n        const el = sharedConfig.context ? getNextElement() : createElement(component, isSvg);\n        spread(el, others, isSvg);\n        return el;\n    }\n  });\n}\n\nexport { Aliases, voidFn as Assets, ChildProperties, DOMElements, DelegatedEvents, Dynamic, Hydration, voidFn as HydrationScript, NoHydration, Portal, Properties, SVGElements, SVGNamespace, addEventListener, assign, classList, className, clearDelegatedEvents, delegateEvents, dynamicProperty, escape, voidFn as generateHydrationScript, voidFn as getAssets, getHydrationKey, getNextElement, getNextMarker, getNextMatch, getPropAlias, hydrate, innerHTML, insert, isDev, isServer, render, renderToStream, renderToString, renderToStringAsync, resolveSSRNode, runHydrationEvents, setAttribute, setAttributeNS, spread, ssr, ssrAttribute, ssrClassList, ssrElement, ssrHydrationKey, ssrSpread, ssrStyle, style, template, use, voidFn as useAssets };\n","const recordingBufferLength = 80000\n\n\nexport class VowelSynth\n{\n    ctx: AudioContext\n    nodeSource: OscillatorNode\n    nodeFormant1Filter: BiquadFilterNode\n    nodeFormant1Gain: GainNode\n    nodeFormant2Filter: BiquadFilterNode\n    nodeFormant2Gain: GainNode\n    nodeFormant3Filter: BiquadFilterNode\n    nodeFormant3Gain: GainNode\n    nodeFormant4Filter: BiquadFilterNode\n    nodeFormant4Gain: GainNode\n    nodeAnalyser: AnalyserNode\n    nodeAnalyserData: Uint8Array\n    nodeAnalyserTimeDomainData: Float32Array\n    nodeMicSrc?: MediaStreamAudioSourceNode\n    nodeMicFilter: BiquadFilterNode\n    recordingBuffer: AudioBuffer\n    nodeRecordingSrc?: AudioBufferSourceNode\n    recordingPlaybackStartTime: number\n    waveformCaptureNode: AudioWorkletNode\n    waveformBuffer: Float32Array\n    waveformBufferReturn: Float32Array\n    waveformBufferIndex: number\n\n    cachedFormants: number[]\n\n\n    static async create(): Promise<VowelSynth>\n    {\n        const ctx = new AudioContext({ sampleRate: 11000 })\n        await ctx.audioWorklet.addModule(\"build/audioWorklet.js\")\n        return new VowelSynth(ctx)\n    }\n\n    \n    private constructor(ctx: AudioContext)\n    {\n        this.ctx = ctx\n\n\n        this.waveformCaptureNode = new AudioWorkletNode(this.ctx, \"waveformCapture\")\n        this.waveformCaptureNode.port.onmessage = (ev) => this.captureWaveform(ev)\n        this.waveformCaptureNode.connect(this.ctx.destination)\n\n        this.nodeAnalyser = this.ctx.createAnalyser()\n        this.nodeAnalyser.fftSize = 2048\n        this.nodeAnalyser.maxDecibels = -20\n        this.nodeAnalyser.minDecibels = -90\n        this.nodeAnalyser.smoothingTimeConstant = 0.8\n        this.nodeAnalyserData = new Uint8Array(this.nodeAnalyser.fftSize)\n        this.nodeAnalyserTimeDomainData = new Float32Array(this.nodeAnalyser.fftSize)\n        this.nodeAnalyser.connect(this.waveformCaptureNode)\n\n        this.waveformBuffer = new Float32Array(80000)\n        this.waveformBufferIndex = 0\n\n        this.nodeMicFilter = this.ctx.createBiquadFilter()\n        this.nodeMicFilter.type = \"lowpass\"\n        this.nodeMicFilter.frequency.value = 3000\n        this.nodeMicFilter.Q.value = 25\n        this.nodeMicFilter.connect(this.nodeAnalyser)\n\n\n        this.nodeFormant1Gain = this.ctx.createGain()\n        this.nodeFormant1Gain.gain.value = 0\n        this.nodeFormant1Gain.connect(this.nodeAnalyser)\n        this.nodeFormant1Gain.connect(this.ctx.destination)\n\n        this.nodeFormant1Filter = this.ctx.createBiquadFilter()\n        this.nodeFormant1Filter.type = \"bandpass\"\n        this.nodeFormant1Filter.frequency.value = 0\n        this.nodeFormant1Filter.Q.value = 5\n        this.nodeFormant1Filter.connect(this.nodeFormant1Gain)\n\n        \n        this.nodeFormant2Gain = this.ctx.createGain()\n        this.nodeFormant2Gain.gain.value = 0\n        this.nodeFormant2Gain.connect(this.nodeAnalyser)\n        this.nodeFormant2Gain.connect(this.ctx.destination)\n\n        this.nodeFormant2Filter = this.ctx.createBiquadFilter()\n        this.nodeFormant2Filter.type = \"bandpass\"\n        this.nodeFormant2Filter.frequency.value = 0\n        this.nodeFormant2Filter.Q.value = 5\n        this.nodeFormant2Filter.connect(this.nodeFormant2Gain)\n\n        \n        this.nodeFormant3Gain = this.ctx.createGain()\n        this.nodeFormant3Gain.gain.value = 0\n        this.nodeFormant3Gain.connect(this.nodeAnalyser)\n        this.nodeFormant3Gain.connect(this.ctx.destination)\n\n        this.nodeFormant3Filter = this.ctx.createBiquadFilter()\n        this.nodeFormant3Filter.type = \"bandpass\"\n        this.nodeFormant3Filter.frequency.value = 0\n        this.nodeFormant3Filter.Q.value = 5\n        this.nodeFormant3Filter.connect(this.nodeFormant3Gain)\n\n        \n        this.nodeFormant4Gain = this.ctx.createGain()\n        this.nodeFormant4Gain.gain.value = 0\n        this.nodeFormant4Gain.connect(this.nodeAnalyser)\n        this.nodeFormant4Gain.connect(this.ctx.destination)\n\n        this.nodeFormant4Filter = this.ctx.createBiquadFilter()\n        this.nodeFormant4Filter.type = \"bandpass\"\n        this.nodeFormant4Filter.frequency.value = 0\n        this.nodeFormant4Filter.Q.value = 5\n        this.nodeFormant4Filter.connect(this.nodeFormant4Gain)\n\n\n        this.nodeSource = this.ctx.createOscillator()\n        this.nodeSource.type = \"sawtooth\"\n        this.nodeSource.frequency.value = 90\n        this.nodeSource.connect(this.nodeFormant1Filter)\n        this.nodeSource.connect(this.nodeFormant2Filter)\n        //this.nodeSource.connect(this.nodeFormant3Filter)\n        //this.nodeSource.connect(this.nodeFormant4Filter)\n        this.nodeSource.start()\n\n\n        this.recordingBuffer = this.ctx.createBuffer(1, recordingBufferLength, this.ctx.sampleRate)\n        this.recordingPlaybackStartTime = 0\n\n        this.cachedFormants = []\n    }\n\n\n    resume()\n    {\n        this.ctx.resume()\n    }\n\n\n    setGain(gain: number)\n    {\n        const generalGain = 0.5\n        this.nodeFormant1Gain.gain.value = gain * generalGain\n        this.nodeFormant2Gain.gain.value = gain * generalGain * 0.8\n        this.nodeFormant3Gain.gain.value = gain * generalGain * 0.5\n        this.nodeFormant4Gain.gain.value = gain * generalGain * 0.2\n    }\n\n\n    setFrequencies(formant1Freq: number, formant2Freq: number)\n    {\n        formant1Freq = Math.max(0, Math.min(5000, formant1Freq))\n        formant2Freq = Math.max(0, Math.min(5000, formant2Freq))\n\n        this.nodeFormant1Filter.frequency.value = formant1Freq\n        this.nodeFormant2Filter.frequency.value = formant2Freq\n        this.nodeFormant3Filter.frequency.value = 2700\n        this.nodeFormant4Filter.frequency.value = 3500\n    }\n\n\n    captureWaveform(ev: MessageEvent)\n    {\n        const buffer = ev.data.buffer as Float32Array\n        const length = ev.data.length as number\n        //console.log(\"captureWaveform\", this.waveformBufferIndex, buffer, length)\n\n        for (let i = 0; i < length; i++)\n        {\n            const outputIndex = (this.waveformBufferIndex + i) % this.waveformBuffer.length\n            this.waveformBuffer[outputIndex] = buffer[i]\n        }\n\n        this.waveformBufferIndex = (this.waveformBufferIndex + length) % this.waveformBuffer.length\n    }\n\n\n    getWaveform(fromSampleIndex: number): Float32Array\n    {\n        const length = Math.max(0,\n            fromSampleIndex > this.waveformBufferIndex ?\n                this.waveformBuffer.length - fromSampleIndex + this.waveformBufferIndex :\n                this.waveformBufferIndex - fromSampleIndex)\n\n        //console.log(\"getWaveform\", fromSampleIndex, length)\n        const result = new Float32Array(length)\n        \n        for (let i = 0; i < length; i++)\n            result[i] = this.waveformBuffer[(fromSampleIndex + i) % this.waveformBuffer.length]\n\n        return result\n    }\n\n\n    getWaveformLatest(latestNumSamples: number): Float32Array\n    {\n        return this.getWaveform(\n            (this.waveformBufferIndex + this.waveformBuffer.length - latestNumSamples) % this.waveformBuffer.length)\n    }\n\n\n    cacheFormants(formants: number[])\n    {\n        this.cachedFormants = formants\n    }\n\n\n    getCachedFormants(): number[]\n    {\n        return this.cachedFormants\n    }\n\n\n    getAnalyserData(): Uint8Array\n    {\n        this.nodeAnalyser.getByteFrequencyData(this.nodeAnalyserData)\n        return this.nodeAnalyserData\n    }\n\n\n    getAnalyserTimeData(): Float32Array\n    {\n        this.nodeAnalyser.getFloatTimeDomainData(this.nodeAnalyserTimeDomainData)\n        return this.nodeAnalyserTimeDomainData\n    }\n\n\n    playRecording()\n    {\n        if (this.nodeRecordingSrc)\n        {\n            this.nodeRecordingSrc.stop()\n            this.nodeRecordingSrc.disconnect()\n            this.nodeRecordingSrc = undefined\n        }\n\n        this.nodeRecordingSrc = this.ctx.createBufferSource()\n        this.nodeRecordingSrc.buffer = this.recordingBuffer\n        this.nodeRecordingSrc.connect(this.nodeAnalyser)\n        this.nodeRecordingSrc.connect(this.ctx.destination)\n        this.nodeRecordingSrc.start()\n        this.recordingPlaybackStartTime = this.ctx.currentTime\n    }\n\n\n    async toggleMic()\n    {\n        if (this.nodeMicSrc)\n        {\n            this.nodeMicSrc.disconnect()\n            this.nodeMicSrc = undefined\n            return\n        }\n\n        try\n        {\n            const stream = await navigator.mediaDevices.getUserMedia({ audio: true })\n            this.nodeMicSrc = this.ctx.createMediaStreamSource(stream)\n            this.nodeMicSrc.connect(this.nodeMicFilter)\n        }\n        catch (e)\n        {\n            window.alert(\"Could not open the microphone.\\n\\n\" + e)\n            throw e\n        }\n    }\n}","export const f1Min = 200\nexport const f1Max = 1200\nexport const f2Min = 500\nexport const f2Max = 3500\n\n\nexport const colorSynth = \"#284\"\nexport const colorFormants = \"#02f\"\nexport const colorFrequencyDomain = \"#f20\"\n\n\nexport function canvasResize(canvas: HTMLCanvasElement)\n{\n    const pixelRatio = window.devicePixelRatio || 1\n\n    const rect = canvas.getBoundingClientRect()\n    const w =\n        Math.round(pixelRatio * rect.right) -\n        Math.round(pixelRatio * rect.left)\n    const h =\n        Math.round(pixelRatio * rect.bottom) -\n        Math.round(pixelRatio * rect.top)\n    \n    canvas.width = w\n    canvas.height = h\n}","import * as Solid from \"solid-js\"\nimport { VowelSynth } from \"./vowelSynth.ts\"\nimport * as Common from \"./common.ts\"\nimport { extractFormants } from \"./formantExtractor.ts\"\n//import * as Styled from \"solid-styled-components\"\n\n\nconst logScale = 10\n\n\nexport function VowelChart(props: {\n    synth: VowelSynth,\n})\n{\n    const state: State = {\n        canvas: undefined!,\n        ctx: undefined!,\n        synth: props.synth,\n        mouseDown: false,\n        mousePosNormalized: { x: 0, y: 0 },\n        mousePosFormants: { f1: 0, f2: 0 },\n        mousePath: [],\n        formantPath: [],\n    }\n\n\n    Solid.onMount(() => {\n        state.ctx = state.canvas.getContext(\"2d\")!\n\n        state.canvas.addEventListener(\"mousedown\", (ev) => mouseDown(state, ev))\n        window.addEventListener(\"mousemove\", (ev) => mouseMove(state, ev))\n        window.addEventListener(\"mouseup\", (ev) => mouseUp(state, ev))\n        state.canvas.addEventListener(\"touchstart\", (ev) => mouseDown(state, ev));\n        window.addEventListener(\"touchend\", (ev) => mouseUp(state, ev));\n        window.addEventListener(\"touchcancel\", (ev) => mouseUp(state, ev));\n        window.addEventListener(\"touchmove\", (ev) => mouseMove(state, ev));\n        window.requestAnimationFrame(() => draw(props.synth, state))\n    })\n\n\n    return <canvas\n        ref={ state.canvas }\n        style={{\n            \"width\": \"100%\",\n            \"height\": \"50dvh\",\n            \"border-radius\": \"0.25em\",\n        }}\n    />\n}\n\n\ninterface Position\n{\n    x: number\n    y: number\n}\n\n\ninterface PathPoint\n{\n    x: number\n    y: number\n    timer: number\n}\n\n\ninterface State\n{\n    canvas: HTMLCanvasElement\n    ctx: CanvasRenderingContext2D\n    synth: VowelSynth\n\n    mouseDown: boolean\n    mousePosNormalized: Position\n    mousePosFormants: {\n        f1: number\n        f2: number\n    }\n    mousePath: PathPoint[]\n    formantPath: PathPoint[]\n}\n\n\nfunction updateMousePos(\n    state: State,\n    ev: MouseEvent | TouchEvent)\n{\n    const rect = state.canvas.getBoundingClientRect()\n\n    const [clientX, clientY] = \"touches\" in ev ?\n        [ev.touches.item(0)?.clientX ?? 0, ev.touches.item(0)?.clientY ?? 0] :\n        [ev.clientX, ev.clientY]\n\n    const x = (clientX - rect.x) / rect.width\n    const y = (clientY - rect.y) / rect.height\n\n    state.mousePosNormalized = { x, y }\n\n    state.mousePosFormants = {\n        f1: Math.floor(mapViewToValue(y, Common.f1Min, Common.f1Max)),\n        f2: Math.floor(mapViewToValue(1 - x, Common.f2Min, Common.f2Max)),\n    }\n\n    /*console.log(\n        \"mouse:\",\n        \"F1 = \", state.mousePosFormants.f1, \"Hz\",\n        \"F2 = \", state.mousePosFormants.f2, \"Hz\")*/\n\n    if (state.mouseDown)\n    {\n        state.mousePath.push({ ...state.mousePosNormalized, timer: 1 })\n        while (state.mousePath.length > 200)\n            state.mousePath.splice(0, 1)\n    }\n    \n    state.synth.setFrequencies(\n        state.mousePosFormants.f1,\n        state.mousePosFormants.f2)\n}\n\n\nfunction mapViewToValue(x: number, min: number, max: number)\n{\n    const p = (Math.pow(logScale, x) - 1) / (logScale - 1)\n    return min + (max - min) * p\n}\n\n\nfunction mapValueToView(x: number, min: number, max: number)\n{\n    const p = (x - min) / (max - min)\n    return Math.log((logScale - 1) * p + 1) / Math.log(logScale)\n}\n\n\nfunction mouseDown(\n    state: State,\n    ev: MouseEvent | TouchEvent)\n{\n    ev.preventDefault()\n    state.mouseDown = true\n    state.synth.resume()\n    state.synth.setGain(1)\n    state.mousePath = []\n    updateMousePos(state, ev)\n}\n\n\nfunction mouseMove(\n    state: State,\n    ev: MouseEvent | TouchEvent)\n{\n    if (state.mouseDown)\n        ev.preventDefault()\n\n    updateMousePos(state, ev)\n}\n\n\nfunction mouseUp(\n    state: State,\n    ev: MouseEvent | TouchEvent)\n{\n    if (state.mouseDown)\n        ev.preventDefault()\n\n    state.mouseDown = false\n    state.synth.setGain(0)\n    updateMousePos(state, ev)\n}\n\n\nconst ipaVowels = [\n    { symbol: \"i\", f1: 255, f2: 2890 }, //f1: 262, f2: 2287 },\n    { symbol: \"u\", f1: 260, f2: 593 }, //f1: 304, f2: 878 },\n    { symbol: \"a\", f1: 1072, f2: 1449 }, //f1: 913, f2: 1506 },\n    { symbol: \"o\", f1: 500, f2: 800 }, //f1: 570, f2: 837 },\n    { symbol: \"\", f1: 664, f2: 907 }, //f1: 570, f2: 837 },\n    { symbol: \"\", f1: 709, f2: 2105 }, //f1: 527, f2: 1853 },\n    { symbol: \"e\", f1: 408, f2: 2253 },\n    { symbol: \"\", f1: 600, f2: 1200 },//f1: 544, f2: 1296 },\n    { symbol: \"\", f1: 347, f2: 2629 }, //f1: 391, f2: 1992 },\n    { symbol: \"\", f1: 434, f2: 1024 },\n    { symbol: \"\", f1: 731, f2: 1127 }, //f1: 633, f2: 1194 },\n    { symbol: \"\", f1: 970, f2: 984 }, //f1: 717, f2: 1094 },\n    { symbol: \"\", f1: 902, f2: 1730 }, //f1: 656, f2: 1730 },\n    { symbol: \"y\", f1: 252, f2: 2120 },\n]\n\n\nconst isMobile = window.matchMedia(\"(pointer: coarse)\").matches\n\n\nfunction draw(\n    synth: VowelSynth,\n    state: State)\n{\n    window.requestAnimationFrame(() => draw(synth, state))\n\n    const pixelRatio = window.devicePixelRatio\n    const rect = state.canvas.getBoundingClientRect()\n    const w =\n        Math.round(pixelRatio * rect.right) -\n        Math.round(pixelRatio * rect.left)\n    const h =\n        Math.round(pixelRatio * rect.bottom) -\n        Math.round(pixelRatio * rect.top)\n    state.canvas.width = w\n    state.canvas.height = h\n\n    // Clear background\n    state.ctx.save()\n    state.ctx.translate(0.5, 0.5)\n\n    state.ctx.clearRect(0, 0, w, h)\n    state.ctx.fillStyle = \"#eee\"\n    state.ctx.fillRect(0, 0, w, h)\n\n    // Draw invalid region\n    state.ctx.fillStyle = \"#ccc\"\n    state.ctx.beginPath()\n    state.ctx.moveTo(w, h)\n    for (let freq = Common.f2Min; freq <= Common.f1Max; freq += 100)\n    {\n        const x = w - mapValueToView(freq, Common.f2Min, Common.f2Max) * w\n        const y = mapValueToView(freq, Common.f1Min, Common.f1Max) * h\n        state.ctx.lineTo(x, y)\n    }\n    state.ctx.fill()\n\n    // Draw gradation lines\n    state.ctx.lineWidth = 1\n    state.ctx.strokeStyle = \"#aaa\"\n    state.ctx.fillStyle = \"#aaa\"\n    state.ctx.font = `${ isMobile ? \"1.5em\" : \"0.75em\" } Times New Roman`\n    state.ctx.fillStyle = \"#000\"\n    state.ctx.textAlign = \"left\"\n    state.ctx.textBaseline = \"top\"\n    for (let freq = Common.f2Min + 500; freq < Common.f2Max; freq += 500)\n    {\n        const x = Math.floor(w - mapValueToView(freq, Common.f2Min, Common.f2Max) * w)\n        state.ctx.beginPath()\n        state.ctx.moveTo(x, 0)\n        state.ctx.lineTo(x, h)\n        state.ctx.stroke()\n        state.ctx.fillText(\n            freq == Common.f2Min + 500 ? `F2 = ${ freq } Hz` : `${ freq }`,\n            x + 2,\n            2)\n    }\n    state.ctx.textBaseline = \"bottom\"\n    for (let freq = Common.f1Min + 200; freq <= Common.f1Max; freq += 200)\n    {\n        const y = Math.floor(mapValueToView(freq, Common.f1Min, Common.f1Max) * h)\n        state.ctx.beginPath()\n        state.ctx.moveTo(0, y)\n        state.ctx.lineTo(w, y)\n        state.ctx.stroke()\n        state.ctx.fillText(\n            freq == Common.f1Max ? `F1 = ${ freq } Hz` : `${ freq }`,\n            2,\n            y - 2)\n    }\n\n    // Draw IPA symbols\n    state.ctx.font = `${ isMobile ? \"2.5em\" : \"2em\" } Times New Roman`\n    state.ctx.fillStyle = \"#000\"\n    state.ctx.textAlign = \"center\"\n    state.ctx.textBaseline = \"middle\"\n    for (const vowel of ipaVowels)\n    {\n        const x = Math.floor(w - mapValueToView(vowel.f2, Common.f2Min, Common.f2Max) * w)\n        const y = Math.floor(mapValueToView(vowel.f1, Common.f1Min, Common.f1Max) * h)\n        state.ctx.fillText(vowel.symbol, x, y)\n    }\n\n    // Draw extracted formants path\n    state.ctx.strokeStyle = Common.colorFormants\n    state.ctx.lineWidth = 2\n    for (let p = 1; p < state.formantPath.length; p++)\n    {\n        state.ctx.beginPath()\n        const timer = Math.max(0, state.formantPath[p].timer)\n        state.ctx.globalAlpha = timer\n\n        const pA = state.formantPath[p - 1]\n        const pB = state.formantPath[p]\n        const vecX = (pB.x - pA.x) * w\n        const vecY = (pB.y - pA.y) * h\n        const vecMagn = Math.sqrt(vecX * vecX + vecY * vecY)\n\n        if (vecMagn < w / 4)\n        {\n            state.ctx.moveTo(pA.x * w, pA.y * h)\n            state.ctx.lineTo(pB.x * w, pB.y * h)\n            state.ctx.arc(pA.x * w, pA.y * h, 2, 0, Math.PI * 2)\n        }\n\n        state.ctx.stroke()\n        state.ctx.globalAlpha = 1\n    }\n\n    // Draw mouse path\n    state.ctx.strokeStyle = Common.colorSynth\n    state.ctx.lineWidth = 2\n    for (let p = 1; p < state.mousePath.length; p++)\n    {\n        state.ctx.beginPath()\n        const timer = Math.max(0, state.mousePath[p].timer)\n        state.ctx.globalAlpha = timer\n\n        const pA = state.mousePath[p - 1]\n        const pB = state.mousePath[p]\n        state.ctx.moveTo(pA.x * w, pA.y * h)\n        state.ctx.lineTo(pB.x * w, pB.y * h)\n\n        const vecX = (pB.x - pA.x) * w\n        const vecY = (pB.y - pA.y) * h\n        const vecMagn = Math.sqrt(vecX * vecX + vecY * vecY)\n        const vecXN = vecX / vecMagn\n        const vecYN = vecY / vecMagn\n        const crossSize = 3\n        state.ctx.moveTo(pA.x * w - vecYN * crossSize, pA.y * h + vecXN * crossSize)\n        state.ctx.lineTo(pA.x * w + vecYN * crossSize, pA.y * h - vecXN * crossSize)\n\n        state.ctx.stroke()\n        state.ctx.globalAlpha = 1\n    }\n\n    state.mousePath.forEach((p) => p.timer -= 1 / 30)\n    \n    // Draw mouse\n    if (state.mouseDown)\n    {\n        state.ctx.strokeStyle = Common.colorSynth\n        state.ctx.fillStyle = Common.colorSynth\n        state.ctx.lineWidth = 2\n        state.ctx.beginPath()\n        state.ctx.arc(\n            state.mousePosNormalized.x * w,\n            state.mousePosNormalized.y * h,\n            2,\n            0,\n            Math.PI * 2)\n        state.ctx.stroke()\n\n        state.ctx.font = `${ isMobile ? \"1.5em\" : \"0.75em\" } Times New Roman`\n        state.ctx.textAlign = \"center\"\n        state.ctx.textBaseline = \"bottom\"\n        state.ctx.fillText(\n            `(${ state.mousePosFormants.f1.toFixed(0) }, ` +\n            `${ state.mousePosFormants.f2.toFixed(0) } Hz)`,\n            state.mousePosNormalized.x * w,\n            state.mousePosNormalized.y * h + (isMobile ? -120 : -10))\n    }\n\n    \n    const formants = synth.getCachedFormants()\n    state.formantPath.forEach((p) => p.timer -= 1 / 60)\n\n    if (formants.length >= 2)\n    {\n        const f1 = formants[0]\n        const f2 = formants[1]\n\n        const x = Math.floor(w - mapValueToView(f2, Common.f2Min, Common.f2Max) * w)\n        const y = Math.floor(mapValueToView(f1, Common.f1Min, Common.f1Max) * h)\n\n        state.formantPath.push({ x: x / w, y: y / h, timer: 1 })\n        while (state.formantPath.length > 100)\n            state.formantPath.splice(0, 1)\n\n        state.ctx.strokeStyle = Common.colorFormants\n        state.ctx.fillStyle = Common.colorFormants\n        state.ctx.lineWidth = 2\n        state.ctx.beginPath()\n        state.ctx.arc(\n            x,\n            y,\n            2,\n            0,\n            Math.PI * 2)\n        state.ctx.stroke()\n\n        state.ctx.font = `${ isMobile ? \"1.5em\" : \"0.75em\" } Times New Roman`\n        state.ctx.textAlign = \"center\"\n        state.ctx.textBaseline = \"bottom\"\n        state.ctx.fillText(\n            `(${ f1.toFixed(0) }, ` +\n            `${ f2.toFixed(0) } Hz)`,\n            x,\n            y)\n    }\n\n    state.ctx.restore()\n}","// Verified equivalent to Praat's Burg method.\nexport function forwardLinearPrediction(\n    sample: Float32Array,\n    numCoeffs: number)\n{\n    // INITIALIZE R WITH AUTOCORRELATION COEFFICIENTS\n    const r = new Array(numCoeffs + 1).fill(0)\n    for (let i = 0; i <= numCoeffs; i++)\n    {\n        for (let j = 0; j <= sample.length - 1 - i; j++)\n        {\n            r[i] += sample[j] * sample[j + i]\n        }\n    }\n\n    // INITIALIZE Ak\n    const ak = new Array(numCoeffs + 1).fill(0)\n    ak[0] = 1\n\n    // INITIALIZE Ek\n    let ek = r[0]\n\n    // LEVINSON-DURBIN RECURSION\n    for (let k = 0; k < numCoeffs; k++)\n    {\n        // COMPUTE LAMBDA\n        let lambda = 0\n        for (let j = 0; j <= k; j++)\n        {\n            lambda -= ak[j] * r[k + 1 - j]\n        }\n\n        lambda /= ek\n        \n        // UPDATE Ak\n        for (let i = 0; i <= (k + 1) / 2; i++)\n        {\n            const temp = ak[k + 1 - i] + lambda * ak[i]\n            ak[i] = ak[i] + lambda * ak[k + 1 - i]\n            ak[k + 1 - i] = temp\n        }\n\n        // UPDATE Ek\n        ek *= 1 - lambda * lambda\n    }\n\n    // ASSIGN COEFFICIENTS\n    return ak\n}\n\n\n// From: https://github.com/praat/praat/blob/master/dwsys/NUM2.cpp#L1370\nexport function praatBurgMethod(\n    samples: Float32Array,\n    numCoeffs: number)\n    : number[]\n{\n    const a = new Array<number>(numCoeffs).fill(0)\n    \n\tif (samples.length <= 2)\n    {\n\t\ta[1] = -1.0\n        return a\n\t\t//return ( n == 2 ? 0.5 * (x [1] * x [1] + x [2] * x [2]) : x [1] * x [1] );\n\t}\n\n    const b1 = new Array<number>(samples.length).fill(0)\n    const b2 = new Array<number>(samples.length).fill(0)\n    const aa = new Array<number>(numCoeffs).fill(0)\n\n    const n = samples.length\n    const m = numCoeffs\n\n\t// (3)\n\n\tlet p = 0\n\tfor (let j = 1; j <= n; j++)\n\t\tp += samples[j - 1] * samples[j - 1]\n\n\tlet xms = p / n\n\tif (xms <= 0)\n\t\treturn a // warning empty\n\n\t// (9)\n\n\tb1[1 - 1] = samples[1 - 1]\n\tif (n < 2)\n\t\treturn a\n\n\tb2[n - 1 - 1] = samples[n - 1]\n\tfor (let j = 2; j <= n - 1; j++)\n    {\n\t\tb1[j - 1] = samples[j - 1]\n        b2[j - 1 - 1] = samples[j - 1]\n    }\n\n\tfor (let i = 1; i <= m; i++)\n    {\n\t\t// (7)\n\n\t\tlet num = 0\n        let denum = 0\n\t\tfor (let j = 1; j <= n - i; j++)\n        {\n\t\t\tnum += b1[j - 1] * b2[j - 1]\n\t\t\tdenum += b1[j - 1] * b1[j - 1] + b2[j - 1] * b2[j - 1]\n\t\t}\n\n\t\tif (denum <= 0)\n\t\t\treturn a // warning ill-conditioned\n\n\t\ta[i - 1] = 2 * num / denum\n\n\t\t// (10)\n\n\t\txms *= 1 - a[i - 1] * a[i - 1]\n\n\t\t// (5)\n\n\t\tfor (let j = 1; j <= i - 1; j++)\n\t\t\ta[j - 1] = aa[j - 1] - a[i - 1] * aa[i - j - 1]\n\n\t\tif (i < m)\n        {\n\t\t\t// (8) Watch out: i -> i+1\n\n\t\t\tfor (let j = 1; j <= i; j++)\n\t\t\t\taa[j - 1] = a[j - 1]\n\n\t\t\tfor (let j = 1; j <= n - i - 1; j++)\n            {\n\t\t\t\tb1[j - 1] -= aa[i - 1] * b2[j - 1]\n\t\t\t\tb2[j - 1] = b2[j + 1 - 1] - aa[i - 1] * b1[j + 1 - 1]\n\t\t\t}\n\t\t}\n\t}\n    \n    for (let i = 0; i < a.length; i++)\n        a[i] *= -1\n\n    a.unshift(1)\n\n\treturn a\n}\n\n\n/*void ForwardLinearPrediction( vector<double> &coeffs, const vector<double> &x )\n{\n    // GET SIZE FROM INPUT VECTORS\n    size_t N = x.size() - 1;\n    size_t m = coeffs.size();\n    \n    // INITIALIZE R WITH AUTOCORRELATION COEFFICIENTS\n    vector<double> R( m + 1, 0.0 );\n    for ( size_t i = 0; i <= m; i++ )\n    {\n        for ( size_t j = 0; j <= N - i; j++ )\n        {\n            R[ i ] += x[ j ] * x[ j + i ];\n        }\n    }\n    \n    // INITIALIZE Ak\n    vector<double> Ak( m + 1, 0.0 );\n    Ak[ 0 ] = 1.0;\n    \n    // INITIALIZE Ek\n    double Ek = R[ 0 ];\n    \n    // LEVINSON-DURBIN RECURSION\n    for ( size_t k = 0; k < m; k++ )\n    {\n        // COMPUTE LAMBDA\n        double lambda = 0.0;\n        for ( size_t j = 0; j <= k; j++ )\n        {\n            lambda -= Ak[ j ] * R[ k + 1 - j ];\n        }\n        \n        lambda /= Ek;\n        \n        // UPDATE Ak\n        for ( size_t n = 0; n <= ( k + 1 ) / 2; n++ )\n        {\n            double temp = Ak[ k + 1 - n ] + lambda * Ak[ n ];\n            Ak[ n ] = Ak[ n ] + lambda * Ak[ k + 1 - n ];\n            Ak[ k + 1 - n ] = temp;\n        }\n        \n        // UPDATE Ek\n        Ek *= 1.0 - lambda * lambda;\n    }\n    \n    // ASSIGN COEFFICIENTS\n    coeffs.assign( ++Ak.begin(), Ak.end() );\n}\n\nint main()\n{\n    vector<double> original( 128, 0.0 );\n    for ( size_t i = 0; i < original.size(); i++ ){\n        original[ i ] = sin( i * 0.01 ) + 0.75 * sin( i * 0.03 )+ 0.5 * sin( i * 0.05 ) + 0.25 * sin( i * 0.11 );\n        \n    } \n    for ( int i = 0; i < 128; i++ ){\n        printf( \"Original: %.2d = %.6f\\n\", i, original[ i ] );\n    }\n    // GET FORWARD LINEAR PREDICTION COEFFICIENTS\n    vector<double> coeffs( 4, 0.0 );\n    ForwardLinearPrediction( coeffs, original ); \n    \n    // PREDICT DATA LINEARLY\n    vector<double> predicted( original );\n    size_t m = coeffs.size();\n    for ( size_t i = m; i < predicted.size(); i++ ){\n        predicted[ i ] = 0.0;\n        for ( size_t j = 0; j < m; j++ ){\n            predicted[ i ] -= coeffs[ j ] * original[ i - 1 - j ];\n            \n        }\n        \n    } \n    // CALCULATE AND DISPLAY ERROR\n    double error = 0.0;\n    for ( int i = m; i < predicted.size(); i++ ){\n        //printf( \"Index: %.2d / Original: %.6f / Predicted: %.6f\\n\", i, original[ i ], predicted[ i ] );\n        double delta = predicted[ i ] - original[ i ];\n        error += delta * delta;\n        \n    }\n    printf( \"Forward Linear Prediction Approximation Error: %f\\n\", error);\n    \n    for ( int i = 0; i < coeffs.size(); i++ ){\n        printf( \"Coeff: %.2d = %.6f\\n\", i, coeffs[ i ] );\n    }\n    \n    return 0;\n}\n*/","export interface Complex\n{\n    real: number\n    imag: number\n}\n\n\n// Bairstow method, from: http://catc.ac.ir/mazlumi/jscodes/bairstow.php\n// Taking `coeffs` to be [a, b, c, ...],\n// the polynomial represented is (a * x^0) + (b * x^1) + (c * x^2) + ...\nexport function findRootsOfPolynomial(coeffs: number[])\n{\n    const result: Complex[] = []\n    const epsilon = 1e-6\n\n    const b = new Array<number>(coeffs.length).fill(0)\n    const c = new Array<number>(coeffs.length).fill(0)\n\n    let r = 0\n    let s = 0\n\n    while (coeffs.length > 3)\n    {\n        const n = coeffs.length\n\n        b[n - 1] = 1\n        b[n - 2] = 1\n\n        let budget = 100\n\n        while ((Math.abs(b[n - 1]) + Math.abs(b[n - 2])) > epsilon &&\n            budget > 0)\n        {\n            budget--\n\n            b[0] = coeffs[0]\n            b[1] = coeffs[1] + r * b[0]\n\n            for (let i = 2; i < n; i++)\n                b[i] = coeffs[i] + r * b[i - 1] + s * b[i - 2]\n\n            c[0] = b[0]\n            c[1] = b[1] + r * c[0]\n\n            for (let i = 2; i < n - 1; i++)\n                c[i] = b[i] + r * c[i - 1] + s * c[i - 2]\n\n            const h =\n                (-b[n - 2] * c[n - 3] + b[n - 1] * c[n - 4]) /\n                (c[n - 3] * c[n - 3] - c[n - 2] * c[n - 4])\n            \n            const k =\n                (-b[n - 1] * c[n - 3] + b[n - 2] * c[n - 2]) /\n                (c[n - 3] * c[n - 3] - c[n - 2] * c[n - 4])\n\n            r += h\n            s += k\n        }\n\n        result.push(...solveQuadratic(-s, -r, 1))\n\n        coeffs = b.slice(0, n - 2)\n    }\n\n    if (coeffs.length == 3)\n        result.push(...solveQuadratic(coeffs[0], coeffs[1], coeffs[2]))\n    else\n        result.push({ real: -coeffs[1] / coeffs[0], imag: 0 })\n\n    return result\n}\n\n\nfunction solveQuadratic(\n    a: number,\n    b: number,\n    c: number)\n    : [Complex, Complex]\n{\n    const delta = b * b - 4 * a * c\n\n    const s0 = -b / (2 * a)\n\n    if (delta < 0)\n    {\n        const imag = Math.sqrt(-delta) / (2 * a)\n\n        return [\n            { real: s0, imag:  imag },\n            { real: s0, imag: -imag },\n        ]\n    }\n    else\n    {\n        const detSqrRoot = Math.sqrt(delta) / (2 * a)\n\n        return [\n            { real: s0 + detSqrRoot, imag: 0 },\n            { real: s0 - detSqrRoot, imag: 0 },\n        ]\n    }\n}\n\n/* ORIGINAL PHP EXCERPT:\n\n function solvep2(coef) {\n  var delta;\n  var s = new Array(4);\n\n  delta = coef[1] * coef[1] - 4 * coef[2] * coef[0];\n\n  s[0] = -coef[1] / 2 / coef[2];\n  s[2] = s[0];\n\n  if (delta < 0) {\n\n   s[1] = Math.sqrt(-delta) / 2 / coef[2];\n   s[3] = -s[1];\n\n  }\n  else {\n\n   s[1] = 0;\n   s[3] = 0;\n\n   s[0] = s[0] + Math.sqrt(delta) / 2 / coef[2];\n   s[2] = s[2] - Math.sqrt(delta) / 2 / coef[2];\n\n  }\n\n  return s;\n }\n\n function bairstow(coef) {\n  var a = coef.slice();\n  var i;\n  var N = a.length;\n  var h, k;\n  var result = new Array();\n\n  var r = Math.random();\n  var s = Math.random();\n\n  var b = new Array(N);\n  var c = new Array(N);\n\n  a.reverse();\n\n  while (N > 3) {\n\n   b[N - 1] = 1;\n   b[N - 2] = 1;\n\n   while ((Math.abs(b[N - 1]) + Math.abs(b[N - 2])) > 1e-6) {\n\n    b[0] = a[0];\n    b[1] = a[1] + r * b[0];\n\n    for(i = 2; i < N; i++) b[i] = a[i] + r * b[i - 1] + s * b[i - 2];\n\n    c[0] = b[0];\n    c[1] = b[1] + r * c[0];\n\n    for(i = 2; i < N - 1; i++) c[i] = b[i] + r * c[i - 1] + s * c[i - 2];\n\n    h = (-b[N - 2] * c[N - 3] + b[N - 1] * c[N - 4]) / (c[N - 3] * c[N - 3] - c[N - 2] * c[N - 4]);\n    k = (-b[N - 1] * c[N - 3] + b[N - 2] * c[N - 2]) / (c[N - 3] * c[N - 3] - c[N - 2] * c[N - 4]);\n\n    r = r + h;\n    s = s + k;\n   }\n\n   result = result.concat(solvep2([-s, -r, 1]));\n\n   a = b.slice(0, N - 2);\n   N = a.length;\n  }\n\n  if (N == 3) {\n   result = result.concat(solvep2(a.reverse()));\n  }\n  else {\n   result = result.concat([-a[1] / a[0], 0]);\n  }\n \n  return result;\n }\n\n*/","import { forwardLinearPrediction, praatBurgMethod } from \"./lpc.ts\"\nimport { findRootsOfPolynomial, Complex } from \"./roots.ts\"\n\n\n// From: https://www.mathworks.com/help/signal/ug/formant-estimation-with-lpc-coefficients.html\n// From: https://github.com/praat/praat/blob/master/fon/Sound_to_Formant.cpp\nexport function extractFormants(\n    /// An array of sound samples in the range [-1, 1]\n    sample: Float32Array,\n    /// The sampling frequency in hertz\n    samplingFrequency: number)\n    /// Returns the frequencies of the formants in hertz\n    : number[]\n{\n    if (sample.every(s => s === 0))\n        return []\n\n    console.log(\"== extractFormants ==\")\n    console.log(\"samplingFrequency\", samplingFrequency, \"Hz\")\n    console.log(\"sample length\", sample.length, \"samples =\", sample.length / samplingFrequency, \"seconds\")\n\n    const samplePreemphasized =\n        //preemphasisFilter(sampleWindowed)\n        praatPreemphasis(sample, samplingFrequency)\n\n    const sampleWindowed =\n        //sample.map((s, i) => s * hammingWindow(i, sample.length))\n        samplePreemphasized.map((s, i) => s * praatGaussianWindow(i, sample.length))\n\n    const lpc =\n        //forwardLinearPrediction(sampleWindowed, 10)\n        praatBurgMethod(sampleWindowed, 10)\n\n    const polynomial = praatLpcToPolynomial(lpc)\n    \n    const roots = findRootsOfPolynomial(polynomial)\n        .filter(c => c.imag >= 0)\n        .map(c => praatFixRootToUnitCircle(c))\n        \n    const formants = rootsToFormants(roots, samplingFrequency)\n    console.log(\"formants\", formants.map(f => f.frequency.toFixed(0).padStart(4, \" \")).join(\", \"), \"Hz\", formants)\n    return formants.map(f => f.frequency)\n}\n\n\nfunction complexMagnitude(c: Complex): number\n{\n    return Math.sqrt(c.real * c.real + c.imag * c.imag)\n}\n\n\nfunction complexConjugate(c: Complex): Complex\n{\n    return {\n        real: c.real,\n        imag: -c.imag,\n    }\n}\n\n\nfunction complexDivide(a: Complex, b: Complex): Complex\n{\n    const d = (b.imag * b.imag + b.real * b.real)\n    return {\n        real: (a.real * b.real - a.imag * b.imag) / d,\n        imag: (a.imag * b.real - a.real * b.imag) / d,\n    }\n}\n\n\nfunction hammingWindow(\n    n: number,\n    nMax: number)\n{\n    const a0 = 25 / 46\n    return a0 - (1 - a0) * Math.cos(2 * Math.PI * n / nMax)\n}\n\n\nexport function praatGaussianWindow(\n    n: number,\n    nMax: number)\n{\n    n += 1\n    const nMid = 0.5 * (nMax + 1)\n    const edge = Math.exp(-12.0)\n    return (Math.exp(-48.0 * (n - nMid) * (n - nMid) / (nMax + 1) / (nMax + 1)) - edge) / (1.0 - edge)\n}\n\n\nfunction preemphasisFilter(\n    array: Float32Array)\n{\n    const result = new Float32Array(array.length)\n\n    const a0 = 1\n    const a1 = 0.63\n\n    result[0] = a0 * array[0]\n\n    for (let i = 1; i < array.length; i++)\n        result[i] = a0 * array[i] - a1 * result[i - 1]\n    \n    return result\n}\n\n\nexport function praatPreemphasis(\n    array: Float32Array,\n    samplingFrequency: number)\n{\n    const result = new Float32Array(array)\n\n    const preemphasisFrequency = 50\n    const dx = 1 / samplingFrequency\n    const preEmphasis = Math.exp(-2.0 * Math.PI * preemphasisFrequency * dx)\n\n    for (let i = array.length - 1; i >= 1; i--)\n        result[i] -= preEmphasis * result[i - 1]\n\n    return result\n}\n\n\nexport function praatLpcToPolynomial(lpc: number[])\n{\n    const polynomial = new Array<number>(lpc.length)\n\n\tfor (let i = 0; i < lpc.length; i++)\n\t\tpolynomial[i] = lpc[lpc.length - 1 - i]\n\n    return polynomial\n}\n\n\nexport function praatFixRootToUnitCircle(root: Complex)\n{\n    if (complexMagnitude(root) <= 1)\n        return root\n     \n    return complexDivide(\n        { imag: 0, real: 1 },\n        complexConjugate(root))\n}\n\n\ninterface Formant\n{\n    frequency: number\n    bandwidth: number\n}\n\n\nexport function rootsToFormants(\n    roots: Complex[],\n    samplingFrequency: number)\n    : Formant[]\n{\n    const nyquistFrequency = samplingFrequency / 2\n    const safetyMargin = 50\n\n    const frequencies = roots\n        .map(c => Math.abs(Math.atan2(c.imag, c.real)) * nyquistFrequency / Math.PI)\n\n    const bandwidths = roots\n        .map(r => -Math.log(complexMagnitude(r)) * nyquistFrequency / Math.PI * 2)\n\n    const formants: Formant[] = []\n    for (let i = 0; i < frequencies.length; i++)\n    {\n        const frequency = frequencies[i]\n        const bandwidth = bandwidths[i]\n        if (frequency > safetyMargin &&\n            frequency < nyquistFrequency - safetyMargin &&\n            frequency < 3500)\n            formants.push({ frequency, bandwidth })\n    }\n\n    formants.sort((a, b) => a.frequency - b.frequency)\n    return formants\n}","import * as Solid from \"solid-js\"\nimport { VowelSynth } from \"./vowelSynth.ts\"\nimport { extractFormants } from \"./formantExtractor.ts\"\nimport * as Common from \"./common.ts\"\n\n\nexport function AnalysisChart(props: {\n    synth: VowelSynth,\n})\n{\n    let canvas: HTMLCanvasElement = undefined!\n    let canvasCtx: CanvasRenderingContext2D = undefined!\n\n\n    Solid.onMount(() => {\n        canvasCtx = canvas.getContext(\"2d\")!\n        window.requestAnimationFrame(() => draw(props.synth, canvasCtx))\n    })\n\n    return <canvas\n        ref={ canvas }\n        style={{\n            \"width\": \"100%\",\n            \"height\": \"15dvh\",\n            \"border-radius\": \"0.25em\",\n        }}\n    />\n}\n\n\nfunction mapValueToView(\n    x: number,\n    w: number)\n{\n    const min = Common.f1Min - 100\n    const max = Common.f2Max + 500\n    const p = (x - min) / (max - min)\n    const logScale = 10\n    const t = Math.log((logScale - 1) * p + 1) / Math.log(logScale)\n    const xMargin = 10\n    return xMargin + ((w - xMargin * 2) * t)\n}\n\n\nfunction draw(\n    synth: VowelSynth,\n    canvasCtx: CanvasRenderingContext2D)\n{\n    requestAnimationFrame(() => draw(synth, canvasCtx))\n\n    const pixelRatio = window.devicePixelRatio\n    const rect = canvasCtx.canvas.getBoundingClientRect()\n    const w =\n        Math.round(pixelRatio * rect.right) -\n        Math.round(pixelRatio * rect.left)\n    const h =\n        Math.round(pixelRatio * rect.bottom) -\n        Math.round(pixelRatio * rect.top)\n    canvasCtx.canvas.width = w\n    canvasCtx.canvas.height = h\n\n    const freqData = synth.getAnalyserData()\n\n    canvasCtx.save()\n    canvasCtx.translate(0.5, 0.5)\n\n    canvasCtx.fillStyle = \"#eee\"\n    canvasCtx.fillRect(0, 0, w, h)\n\n    const xMargin = 10\n\n    canvasCtx.lineWidth = 1\n    canvasCtx.strokeStyle = \"#aaa\"\n    canvasCtx.fillStyle = \"#aaa\"\n    canvasCtx.font = \"0.75em Times New Roman\"\n    canvasCtx.fillStyle = \"#000\"\n    canvasCtx.textAlign = \"left\"\n    canvasCtx.textBaseline = \"top\"\n    for (let freq = Common.f2Min; freq <= Common.f2Max; freq += 500)\n    {\n        const x = Math.floor(mapValueToView(freq, w))\n        \n        canvasCtx.beginPath()\n        canvasCtx.moveTo(x, 0)\n        canvasCtx.lineTo(x, h)\n        canvasCtx.stroke()\n        canvasCtx.fillText(freq + \" Hz\", x + 2, 2)\n    }\n\n    canvasCtx.lineWidth = 2\n    canvasCtx.strokeStyle = Common.colorFrequencyDomain\n    canvasCtx.beginPath()\n    for (let i = 0; i < freqData.length; i++)\n    {\n        const freq = i / freqData.length * (synth.ctx.sampleRate / 1)\n        if (freq < Common.f1Min - 100)\n            continue\n        if (freq > Common.f2Max + 500)\n            break\n\n        const v = freqData[i] / 255\n        const y = h - (v * h)\n        const x = mapValueToView(freq, w)\n        \n        canvasCtx.moveTo(x, h)\n        canvasCtx.lineTo(x, y)\n    }\n    canvasCtx.stroke()\n\n    const timeData = synth.getWaveformLatest(Math.floor(synth.ctx.sampleRate * 0.05))\n\n    canvasCtx.lineWidth = 1\n    canvasCtx.strokeStyle = \"#0008\"\n    canvasCtx.beginPath()\n    canvasCtx.moveTo(0, h / 2)\n    for (let i = 0; i < timeData.length; i++)\n    {\n        const y = h / 2 - (timeData[i] * h / 2)\n\n        const x =\n            xMargin + (\n                (w - xMargin * 2) *\n                (i / timeData.length))\n        \n        canvasCtx.lineTo(x, y)\n    }\n    canvasCtx.lineTo(w, h / 2)\n    canvasCtx.stroke()\n\n    const formants = extractFormants(timeData, synth.ctx.sampleRate)\n    synth.cacheFormants(formants)\n\n    canvasCtx.lineWidth = 2\n    canvasCtx.strokeStyle = Common.colorFormants\n    canvasCtx.globalAlpha = 0.75\n    canvasCtx.beginPath()\n    for (let i = 0; i < formants.length; i++)\n    {\n        const x = mapValueToView(formants[i], w)\n        \n        canvasCtx.moveTo(x, 0)\n        canvasCtx.lineTo(x, h)\n    }\n    canvasCtx.stroke()\n\n    canvasCtx.globalAlpha = 1\n\n    canvasCtx.restore()\n}","// From https://github.com/Jam3/audiobuffer-to-wav\n// with modifications\n\n\nexport function encode(\n    samples: Float32Array,\n    sampleRate: number)\n    : ArrayBuffer\n{\n    const format = 1 // or 3\n    const bitDepth = 16 // or 32\n\n    return encodeWAV(samples, format, sampleRate, 1, bitDepth)\n}\n\n\nfunction encodeWAV(\n    samples: Float32Array,\n    format: number,\n    sampleRate: number,\n    numChannels: number,\n    bitDepth: number)\n{\n    var bytesPerSample = bitDepth / 8\n    var blockAlign = numChannels * bytesPerSample\n\n    var buffer = new ArrayBuffer(44 + samples.length * bytesPerSample)\n    var view = new DataView(buffer)\n\n    /* RIFF identifier */\n    writeString(view, 0, 'RIFF')\n    /* RIFF chunk length */\n    view.setUint32(4, 36 + samples.length * bytesPerSample, true)\n    /* RIFF type */\n    writeString(view, 8, 'WAVE')\n    /* format chunk identifier */\n    writeString(view, 12, 'fmt ')\n    /* format chunk length */\n    view.setUint32(16, 16, true)\n    /* sample format (raw) */\n    view.setUint16(20, format, true)\n    /* channel count */\n    view.setUint16(22, numChannels, true)\n    /* sample rate */\n    view.setUint32(24, sampleRate, true)\n    /* byte rate (sample rate * block align) */\n    view.setUint32(28, sampleRate * blockAlign, true)\n    /* block align (channel count * bytes per sample) */\n    view.setUint16(32, blockAlign, true)\n    /* bits per sample */\n    view.setUint16(34, bitDepth, true)\n    /* data chunk identifier */\n    writeString(view, 36, 'data')\n    /* data chunk length */\n    view.setUint32(40, samples.length * bytesPerSample, true)\n    if (format === 1) // Raw PCM\n        floatTo16BitPCM(view, 44, samples)\n    else\n        writeFloat32(view, 44, samples)\n\n    return buffer\n}\n\n\nfunction writeFloat32(output: DataView, offset: number, input: Float32Array)\n{\n    for (var i = 0; i < input.length; i++, offset += 4)\n        output.setFloat32(offset, input[i], true)\n}\n\n\nfunction floatTo16BitPCM(output: DataView, offset: number, input: Float32Array)\n{\n    for (var i = 0; i < input.length; i++, offset += 2)\n    {\n        const s = Math.max(-1, Math.min(1, input[i]))\n        output.setInt16(offset, s * 0x7fff, true)\n    }\n}\n\nfunction writeString(view: DataView, offset: number, string: string)\n{\n    for (var i = 0; i < string.length; i++)\n        view.setUint8(offset + i, string.charCodeAt(i))\n}","import * as Solid from \"solid-js\"\nimport { VowelSynth } from \"./vowelSynth.ts\"\nimport * as Common from \"./common.ts\"\nimport * as Wav from \"./wavEncode.ts\"\nimport { testExtractFormants } from \"./test.ts\"\n//import * as Styled from \"solid-styled-components\"\n\n\nexport function RecordingPanel(props: {\n    synth: VowelSynth,\n})\n{\n    const state: State = {\n        canvas: undefined!,\n        ctx: undefined!,\n        synth: props.synth,\n\n        sampleBuffer: new Float32Array(props.synth.recordingBuffer.length),\n\n        recording: false,\n        recordingIndex: 0,\n        waveformBufferIndex: 0,\n\n        playing: false,\n        playingIndex: 0,\n    }\n\n\n    Solid.onMount(() => {\n        state.ctx = state.canvas.getContext(\"2d\")!\n\n        window.requestAnimationFrame(() => draw(state))\n    })\n\n\n    return <>\n        <canvas\n            ref={ state.canvas }\n            style={{\n                \"width\": \"100%\",\n                \"height\": \"15dvh\",\n                \"border-radius\": \"0.25em\",\n            }}\n        />\n        <br/>\n        <button onclick={ () => recordingToggle(state) }>\n            Record\n        </button>\n        { \" \" }\n        <button onclick={ () => play(state) }>\n            Play\n        </button>\n        { \" \" }\n        <button onclick={ () => exportWav(state) }>\n            Export .wav\n        </button>\n        { \" \" }\n        <button onclick={ async () => importWav(state) }>\n            Import .wav\n        </button>\n    </>\n}\n\n\ninterface State\n{\n    canvas: HTMLCanvasElement\n    ctx: CanvasRenderingContext2D\n    synth: VowelSynth\n\n    /// Each sample is in the range [-1, 1].\n    sampleBuffer: Float32Array\n\n    recording: boolean\n    recordingIndex: number\n    waveformBufferIndex: number\n\n    playing: boolean\n    playingIndex: number\n}\n\n\nfunction recordingToggle(state: State)\n{\n    if (state.recording)\n    {\n        recordingFinish(state)\n        return\n    }\n\n    state.sampleBuffer.fill(0)\n    state.recording = true\n    state.recordingIndex = 0\n    state.waveformBufferIndex = state.synth.waveformBufferIndex\n\n    window.requestAnimationFrame(() => recordingFrame(state))\n}\n\n\nfunction recordingFinish(state: State)\n{\n    state.recording = false\n    state.synth.recordingBuffer.copyToChannel(state.sampleBuffer, 0, 0)\n}\n\n\nfunction recordingFrame(state: State)\n{\n    if (!state.recording)\n        return\n\n    const waveform = state.synth\n        .getWaveform(state.waveformBufferIndex)\n        .slice(0, state.sampleBuffer.length - state.recordingIndex)\n\n    state.sampleBuffer.set(waveform, state.recordingIndex)\n    state.recordingIndex += waveform.length\n    state.waveformBufferIndex = state.synth.waveformBufferIndex\n\n    if (state.recordingIndex >= state.sampleBuffer.length)\n    {\n        recordingFinish(state)\n        return\n    }\n\n    window.requestAnimationFrame(() => recordingFrame(state))\n}\n\n\nfunction play(state: State)\n{\n    state.playing = true\n    state.playingIndex = 0\n    state.synth.playRecording()\n\n    window.requestAnimationFrame(() => playFrame(state))\n}\n\n\nfunction playFrame(state: State)\n{\n    if (!state.playing)\n        return\n    \n    const timeDelta = state.synth.ctx.currentTime - state.synth.recordingPlaybackStartTime\n    state.playingIndex = timeDelta * state.synth.ctx.sampleRate\n\n    if (state.playingIndex >= state.recordingIndex)\n    {\n        state.playing = false\n        return\n    }\n\n    window.requestAnimationFrame(() => playFrame(state))\n}\n\n\nfunction exportWav(state: State)\n{\n    const data = Wav.encode(\n        state.sampleBuffer.slice(0, state.recordingIndex),\n        state.synth.ctx.sampleRate)\n\n    const blob = new Blob([data], { type: \"octet/stream\" })\n    const url = window.URL.createObjectURL(blob)\n\n    const element = document.createElement(\"a\")\n    element.setAttribute(\"href\", url)\n    element.setAttribute(\"download\", \"recording.wav\")\n\n    element.style.display = \"none\"\n    document.body.appendChild(element)\n    element.click()\n    document.body.removeChild(element)\n}\n\n\nasync function importWav(state: State)\n{\n    const handles = await (window as any).showOpenFilePicker({\n        multiple: false,\n        types: [{\n            description: \"Audio files\",\n            accept: {\n                \"audio/wav\": [\".wav\"],\n            },\n        }]\n    })\n    const handle = handles[0]\n    const file: File = await handle.getFile()\n    const bytes = await file.arrayBuffer()\n    const buffer = await state.synth.ctx.decodeAudioData(bytes)\n\n    const waveform = buffer\n        .getChannelData(0)\n        .slice(0, state.sampleBuffer.length)\n\n    state.sampleBuffer.fill(0)\n    state.sampleBuffer.set(waveform, 0)\n    state.recordingIndex = waveform.length\n    recordingFinish(state)\n\n    testExtractFormants([...waveform], buffer.sampleRate)\n}\n\n\nfunction draw(state: State)\n{\n    window.requestAnimationFrame(() => draw(state))\n\n    Common.canvasResize(state.canvas)\n\n    const w = state.canvas.width\n    const h = state.canvas.height\n\n    state.ctx.save()\n    state.ctx.translate(0.5, 0.5)\n\n    state.ctx.fillStyle = \"#eee\"\n    state.ctx.fillRect(0, 0, w, h)\n\n    const sampleIndexToX = (index: number) => {\n        const margin = 20\n        return (index / state.sampleBuffer.length) * (w - margin * 2) + margin\n    }\n\n    const sampleAmplitudeToY = (amplitude: number) => {\n        const margin = 10\n        return h / 2 - amplitude * (h / 2 - margin)\n    }\n\n\n    // Draw boundaries\n    state.ctx.strokeStyle = \"#000\"\n    state.ctx.lineWidth = 1\n    state.ctx.beginPath()\n    state.ctx.moveTo(sampleIndexToX(0), 0)\n    state.ctx.lineTo(sampleIndexToX(0), h)\n    state.ctx.moveTo(sampleIndexToX(state.sampleBuffer.length), 0)\n    state.ctx.lineTo(sampleIndexToX(state.sampleBuffer.length), h)\n    state.ctx.stroke()\n\n    // Draw waveform\n    state.ctx.strokeStyle = \"#000\"\n    state.ctx.lineWidth = 1\n    state.ctx.beginPath()\n    state.ctx.moveTo(sampleIndexToX(0), sampleAmplitudeToY(0))\n    for (let i = 0; i < state.recordingIndex; i++)\n    {\n        const amplitude = state.sampleBuffer.at(i) ?? 0\n        state.ctx.lineTo(sampleIndexToX(i), sampleAmplitudeToY(amplitude))\n    }\n    state.ctx.lineTo(sampleIndexToX(state.recordingIndex), sampleAmplitudeToY(0))\n    state.ctx.lineTo(sampleIndexToX(state.sampleBuffer.length), sampleAmplitudeToY(0))\n    state.ctx.stroke()\n\n    // Draw recording head\n    if (state.recording)\n    {\n        state.ctx.strokeStyle = \"#f00\"\n        state.ctx.lineWidth = 2\n        state.ctx.beginPath()\n        state.ctx.moveTo(sampleIndexToX(state.recordingIndex), 0)\n        state.ctx.lineTo(sampleIndexToX(state.recordingIndex), h)\n        state.ctx.stroke()\n    }\n\n    // Draw playing head\n    if (state.playing)\n    {\n        state.ctx.strokeStyle = Common.colorSynth\n        state.ctx.lineWidth = 2\n        state.ctx.beginPath()\n        state.ctx.moveTo(sampleIndexToX(state.playingIndex), 0)\n        state.ctx.lineTo(sampleIndexToX(state.playingIndex), h)\n        state.ctx.stroke()\n    }\n\n    state.ctx.restore()\n}","import { forwardLinearPrediction, praatBurgMethod } from \"./lpc.ts\"\nimport { praatFixRootToUnitCircle, praatGaussianWindow, praatLpcToPolynomial, praatPreemphasis, rootsToFormants } from \"./formantExtractor.ts\"\nimport { findRootsOfPolynomial, Complex } from \"./roots.ts\"\n\n\nconst data = [\n    0.000000,\n    0.000000,\n    0.000000,\n    -0.000000,\n    0.000000,\n    -0.000000,\n    -0.000001,\n    -0.000000,\n    0.000000,\n    0.000001,\n    0.000001,\n    0.000001,\n    -0.000000,\n    -0.000001,\n    -0.000001,\n    -0.000001,\n    -0.000000,\n    0.000000,\n    0.000000,\n    0.000000,\n    0.000000,\n    0.000000,\n    0.000001,\n    0.000001,\n    0.000001,\n    -0.000000,\n    -0.000002,\n    -0.000002,\n    -0.000002,\n    -0.000001,\n    0.000002,\n    0.000004,\n    0.000004,\n    0.000003,\n    -0.000000,\n    -0.000003,\n    -0.000005,\n    -0.000004,\n    -0.000002,\n    0.000001,\n    0.000004,\n    0.000005,\n    0.000003,\n    0.000001,\n    -0.000001,\n    -0.000003,\n    -0.000003,\n    -0.000003,\n    -0.000002,\n    -0.000001,\n    0.000001,\n    0.000002,\n    0.000004,\n    0.000005,\n    0.000005,\n    0.000001,\n    -0.000003,\n    -0.000007,\n    -0.000008,\n    -0.000006,\n    -0.000000,\n    0.000005,\n    0.000011,\n    0.000010,\n    0.000007,\n    -0.000001,\n    -0.000005,\n    -0.000011,\n    -0.000008,\n    -0.000006,\n    0.000003,\n    0.000005,\n    0.000012,\n    0.000006,\n    0.000010,\n    -0.000001,\n    0.000002,\n    -0.000011,\n    -0.000002,\n    -0.000013,\n    0.000004,\n    -0.000007,\n    0.000017,\n    0.000001,\n    0.000027,\n    -0.000005,\n    0.000022,\n    -0.000026,\n    0.000016,\n    -0.000043,\n    0.000032,\n    -0.000047,\n    0.000073,\n    -0.000065,\n    0.000132,\n    -0.000160,\n    0.000293,\n    -0.003321,\n    -0.005079,\n    -0.000271,\n    0.003460,\n    0.005808,\n    0.004702,\n    0.002030,\n    -0.001402,\n    -0.003154,\n    -0.003376,\n    -0.001871,\n    -0.000428,\n    0.000695,\n    0.000682,\n    0.000614,\n    0.000507,\n    0.001163,\n    0.001616,\n    0.001744,\n    0.000553,\n    -0.001139,\n    -0.002977,\n    -0.003386,\n    -0.002406,\n    0.000143,\n    0.002556,\n    0.004116,\n    0.003532,\n    0.001596,\n    -0.001232,\n    -0.003086,\n    -0.003666,\n    -0.002369,\n    -0.000483,\n    0.001581,\n    0.002415,\n    0.002409,\n    0.001297,\n    0.000254,\n    -0.000814,\n    -0.001095,\n    -0.001255,\n    -0.000872,\n    -0.000685,\n    -0.000125,\n    0.000248,\n    0.000936,\n    0.001202,\n    0.001383,\n    0.000775,\n    0.000057,\n    -0.000995,\n    -0.001420,\n    -0.001487,\n    -0.000669,\n    0.000184,\n    0.001181,\n    0.001449,\n    0.001332,\n    0.000489,\n    -0.000218,\n    -0.000930,\n    -0.000972,\n    -0.000818,\n    -0.000195,\n    0.000239,\n    0.000677,\n    0.000681,\n    0.000629,\n    0.000309,\n    0.000090,\n    -0.000225,\n    -0.000329,\n    -0.000381,\n    -0.000284,\n    -0.000079,\n    0.000121,\n    0.000391,\n    0.000436,\n    0.000495,\n    0.000200,\n    0.000117,\n    -0.000302,\n    -0.000158,\n    -0.000423,\n    0.000100,\n    -0.000138,\n    0.000561,\n    0.000013,\n    0.000638,\n    0.000127,\n    -0.004668,\n    -0.072371,\n    -0.052466,\n    0.015177,\n    0.055771,\n    0.067039,\n    0.042813,\n    0.008742,\n    -0.021165,\n    -0.030607,\n    -0.025295,\n    -0.010580,\n    0.000130,\n    0.005529,\n    0.004165,\n    0.003394,\n    0.003745,\n    0.007363,\n    0.008728,\n    0.007095,\n    0.000035,\n    -0.007453,\n    -0.012974,\n    -0.011777,\n    -0.005824,\n    0.003347,\n    0.009741,\n    0.011875,\n    0.007960,\n    0.001754,\n    -0.004767,\n    -0.007531,\n    -0.007097,\n    -0.003362,\n    0.000382,\n    0.003488,\n    0.003946,\n    0.003248,\n    0.001234,\n    -0.000104,\n    -0.001284,\n    -0.001288,\n    -0.001335,\n    -0.000750,\n    -0.000571,\n    0.000071,\n    0.000327,\n    0.000907,\n    0.000902,\n    0.000932,\n    0.000301,\n    -0.000121,\n    -0.000752,\n    -0.000755,\n    -0.000705,\n    -0.000128,\n    0.000185,\n    0.000615,\n    0.000524,\n    0.000454,\n    0.000032,\n    -0.000108,\n    -0.000353,\n    -0.000223,\n    -0.000216,\n    0.000038,\n    0.000049,\n    0.000202,\n    0.000096,\n    0.000147,\n    -0.000001,\n    0.000040,\n    -0.000088,\n    -0.000011,\n    -0.000094,\n    0.000013,\n    -0.000044,\n    0.000067,\n    0.000004,\n    0.000091,\n    -0.000004,\n    0.000060,\n    -0.000048,\n    0.000025,\n    -0.000068,\n    0.000034,\n    -0.000055,\n    0.000069,\n    -0.000050,\n    0.000103,\n    -0.000104,\n    0.000214,\n    -0.001112,\n    -0.003375,\n    -0.001062,\n    0.001113,\n    0.002236,\n    0.001966,\n    0.000989,\n    -0.000098,\n    -0.000693,\n    -0.000772,\n    -0.000476,\n    -0.000149,\n    0.000063,\n    0.000100,\n    0.000074,\n    0.000050,\n    0.000081,\n    0.000119,\n    0.000126,\n    0.000065,\n    -0.000029,\n    -0.000116,\n    -0.000143,\n    -0.000107,\n    -0.000026,\n    0.000052,\n    0.000095,\n    0.000087,\n    0.000046,\n    -0.000005,\n    -0.000039,\n    -0.000048,\n    -0.000034,\n    -0.000012,\n    0.000009,\n    0.000018,\n    0.000017,\n    0.000011,\n    0.000003,\n    -0.000002,\n    -0.000004,\n    -0.000004,\n    -0.000003,\n    -0.000002,\n    -0.000001,\n    0.000000,\n    0.000001,\n    0.000002,\n    0.000002,\n    0.000001,\n    0.000000,\n    -0.000001,\n    -0.000001,\n    -0.000001,\n    -0.000001,\n    -0.000000,\n    0.000000,\n    0.000001,\n    0.000001,\n    0.000000,\n    -0.000000,\n    -0.000000,\n    -0.000000,\n    -0.000000,\n    -0.000000,\n    0.000000,\n    0.000000,\n    0.000000,\n    0.000000,\n    0.000000,\n    0.000000,\n    -0.000000,\n    -0.000000,\n    -0.000000,\n    -0.000000,\n    -0.000000,\n    0.000000,\n    0.000000,\n    0.000000,\n    0.000000,\n    0.000000,\n    0.000000,\n    -0.000000,\n    -0.000000,\n    -0.000000,\n    -0.000000,\n    -0.000000,\n    0.000000,\n    0.000000,\n    0.000000\n]\n\n\nconst data2 = [\n    0.001366,\n    0.003476,\n    0.001267,\n    0.005753,\n    -0.019464,\n    -0.100137,\n    -0.124634,\n    -0.090486,\n    -0.022001,\n    0.040711,\n    0.073084,\n    0.067449,\n    0.038528,\n    0.005065,\n    -0.016519,\n    -0.023300,\n    -0.019323,\n    -0.013170,\n    -0.008315,\n    -0.004817,\n    0.001071,\n    0.010109,\n    0.020205,\n    0.025492,\n    0.021955,\n    0.009186,\n    -0.007365,\n    -0.020336,\n    -0.023219,\n    -0.014987,\n    0.000384,\n    0.015369,\n    0.023504,\n    0.021837,\n    0.012423,\n    0.000365,\n    -0.008795,\n    -0.011887,\n    -0.008869,\n    -0.002311,\n    0.004357,\n    0.008717,\n    0.009838,\n    0.008444,\n    0.005685,\n    0.002876,\n    0.000508,\n    -0.000969,\n    -0.001705,\n    -0.001319,\n    -0.000049,\n    0.002175,\n    0.004454,\n    0.006250,\n    0.006491,\n    0.005347,\n    0.002910,\n    0.000557,\n    -0.001123,\n    -0.001103,\n    0.000064,\n    0.002254,\n    0.004032,\n    0.005181,\n    0.004869,\n    0.003950,\n    0.002352,\n    0.001337,\n    0.000578,\n    0.000907,\n    0.001329,\n    0.002359,\n    0.002823,\n    0.003482,\n    0.003303,\n    0.003348,\n    0.002614,\n    0.002446,\n    0.001687,\n    0.001827,\n    0.001457,\n    0.002138,\n    0.002106,\n    0.003017,\n    0.002750,\n    0.003370,\n    0.002499,\n    0.002872,\n    0.001687,\n    0.002412,\n    0.001288,\n    0.002784,\n    0.001420,\n    0.003824,\n    0.000938,\n    0.005702,\n    -0.045451,\n    -0.117520,\n    -0.117889,\n    -0.070282,\n    0.001761,\n    0.055200,\n    0.075442,\n    0.059100,\n    0.027213,\n    -0.004143,\n    -0.020077,\n    -0.022989,\n    -0.016994,\n    -0.011539,\n    -0.006962,\n    -0.003428,\n    0.003941,\n    0.013440,\n    0.022930,\n    0.025265,\n    0.018703,\n    0.003593,\n    -0.012335,\n    -0.022730,\n    -0.021480,\n    -0.010446,\n    0.005920,\n    0.018963,\n    0.024149,\n    0.019233,\n    0.008513,\n    -0.003341,\n    -0.010459,\n    -0.011580,\n    -0.006799,\n    -0.000053,\n    0.006248,\n    0.009341,\n    0.009696,\n    0.007509,\n    0.004810,\n    0.001919,\n    0.000011,\n    -0.001400,\n    -0.001610,\n    -0.001086,\n    0.000702,\n    0.002874,\n    0.005243,\n    0.006432,\n    0.006347,\n    0.004544,\n    0.002155,\n    -0.000213,\n    -0.001220,\n    -0.000914,\n    0.000818,\n    0.002842,\n    0.004605,\n    0.005139,\n    0.004704,\n    0.003362,\n    0.002025,\n    0.000942,\n    0.000676,\n    0.000947,\n    0.001728,\n    0.002479,\n    0.003137,\n    0.003402,\n    0.003408,\n    0.003061,\n    0.002613,\n    0.002125,\n    0.001759,\n    0.001626,\n    0.001708,\n    0.002069,\n    0.002465,\n    0.002906,\n    0.003029,\n    0.003063,\n    0.002670,\n    0.002435,\n    0.001940,\n    0.001986,\n    0.001792,\n    0.002303,\n    0.002251,\n    0.002826,\n    0.002874,\n    -0.001885,\n    -0.074512,\n    -0.125252,\n    -0.106388,\n    -0.046794,\n    0.022890,\n    0.066151,\n    0.073310,\n    0.049252,\n    0.015814,\n    -0.011343,\n    -0.022299,\n    -0.021530,\n    -0.014912,\n    -0.009912,\n    -0.005857,\n    -0.001472,\n    0.006977,\n    0.016886,\n    0.024747,\n    0.024091,\n    0.014377,\n    -0.002023,\n    -0.016741,\n    -0.023709,\n    -0.018685,\n    -0.005228,\n    0.011006,\n    0.021705,\n    0.023573,\n    0.016019,\n    0.004430,\n    -0.006444,\n    -0.011480,\n    -0.010549,\n    -0.004557,\n    0.002189,\n    0.007724,\n    0.009692,\n    0.009229,\n    0.006559,\n    0.003882,\n    0.001110,\n    -0.000464,\n    -0.001665,\n    -0.001463,\n    -0.000679,\n    0.001471,\n    0.003625,\n    0.005872,\n    0.006493,\n    0.005982,\n    0.003695,\n    0.001381,\n    -0.000804,\n    -0.001187,\n    -0.000543,\n    0.001586,\n    0.003418,\n    0.005020,\n    0.005002,\n    0.004421,\n    0.002790,\n    0.001715,\n    0.000654,\n    0.000824,\n    0.001055,\n    0.002113,\n    0.002595,\n    0.003399,\n    0.003297,\n    0.003468,\n    0.002764,\n    0.002609,\n    0.001813,\n    0.001866,\n    0.001438,\n    0.002005,\n    0.001986,\n    0.002851,\n    0.002730,\n    0.003332,\n    0.002664,\n    0.002913,\n    0.001902,\n    0.002338,\n    0.001427,\n    0.002515,\n    0.001568,\n    0.003435,\n    0.001280,\n    0.005749,\n    -0.019465,\n    -0.100133,\n    -0.124639,\n    -0.090480,\n    -0.022006,\n    0.040717,\n    0.073078,\n    0.067455,\n    0.038524,\n    0.005070,\n    -0.016523,\n    -0.023296,\n    -0.019326,\n    -0.013168,\n    -0.008316,\n    -0.004816,\n    0.001071,\n    0.010108,\n    0.020206,\n    0.025490,\n    0.021958,\n    0.009182,\n    -0.007361,\n    -0.020341,\n    -0.023216,\n    -0.015000,\n    0.000395,\n    0.015358,\n    0.023516,\n    0.021824,\n    0.012437,\n    0.000350,\n    -0.008779,\n    -0.011904,\n    -0.008850,\n    -0.002330,\n    0.004377,\n    0.008695,\n    0.009861,\n    0.008419,\n    0.005711,\n    0.002848,\n    0.000537,\n    -0.001000,\n    -0.001672,\n    -0.001354,\n    -0.000013,\n    0.002137,\n    0.004493,\n    0.006208,\n    0.006535,\n    0.005301,\n    0.002958,\n    0.000506,\n    -0.001069,\n    -0.001159,\n    0.000123,\n    0.002192,\n    0.004097,\n    0.005113,\n    0.004941,\n    0.003874,\n    0.002431,\n    0.001253,\n    0.000667,\n    0.000813,\n    0.001427,\n    0.002255,\n    0.002934,\n    0.003365,\n    0.003427,\n    0.003216,\n    0.002755,\n    0.002296,\n    0.001847,\n    0.001655,\n    0.001643,\n    0.001937,\n    0.002324,\n    0.002779,\n    0.003011,\n    0.003081,\n    0.002821,\n    0.002510,\n    0.002100,\n    0.001934,\n    0.001853,\n    0.002099,\n    0.002284,\n    0.002683,\n    0.002449\n]\n\n\n//testExtractFormants(data2, 11000)\n\n\nexport function testExtractFormants(data: number[], samplingFrequency: number)\n{\n    console.log(\"testExtractFormants\")\n    console.log(\"samplingFrequency\", samplingFrequency)\n    console.log(\"data\", data)\n\n    const preemphasized = praatPreemphasis(new Float32Array(data), samplingFrequency)\n    console.log(\"preemphasized\", preemphasized)\n\n    const window = new Array<number>(preemphasized.length)\n        .fill(0)\n        .map((_, i) => praatGaussianWindow(i, preemphasized.length))\n    console.log(\"window\", window)\n\n    const windowed = preemphasized.map((s, i) => s * window[i])\n    console.log(\"windowed\", windowed)\n\n    const lpc = praatBurgMethod(windowed, 10)\n    console.log(\"lpc\", lpc)\n\n    const polynomial = praatLpcToPolynomial(lpc)\n    console.log(\"polynomial\", polynomial)\n    console.log(\"polynomial\", polynomial.map((c, i) => c.toFixed(5) + \"*x^\" + i).join(\"+\"))\n\n    const roots = findRootsOfPolynomial(polynomial)\n    console.log(\"roots\", roots)\n\n    const fixedRoots = roots\n        .filter(c => c.imag >= 0)\n        .map(c => praatFixRootToUnitCircle(c))\n    console.log(\"fixedRoots\", fixedRoots)\n\n    const formants = rootsToFormants(fixedRoots, samplingFrequency)\n    console.log(\"formants\", formants.map(f => f.frequency.toFixed(0).padStart(4, \" \")).join(\", \"), \"Hz\", formants)\n}","import * as Solid from \"solid-js\"\nimport * as SolidWeb from \"solid-js/web\"\nimport * as Styled from \"solid-styled-components\"\n\nimport { VowelSynth } from \"./vowelSynth.ts\"\nimport { VowelChart } from \"./VowelChart.tsx\"\nimport { AnalysisChart } from \"./AnalysisChart.tsx\"\nimport { RecordingPanel } from \"./RecordingPanel.tsx\"\n\nimport \"./test.ts\"\n\n\nfunction Page()\n{\n    const [synth, setSynth] = Solid.createSignal<VowelSynth>(undefined!)\n    VowelSynth.create().then(setSynth)\n\n    return <Solid.Show when={ !!synth() }>\n        <div style={{\n            \"width\": \"min(700px, calc(100dvw - 2em))\",\n            \"height\": \"100dvh\",\n            \"margin\": \"auto\",\n            \"text-align\": \"center\",\n        }}>\n            Click and drag around the top chart to synthesize vowel sounds via formant frequencies.<br/>\n            <br/>\n            Red: extracted frequency-domain data from waveform<br/>\n            Blue: extracted formant frequencies from waveform<br/>\n            <br/>\n            <VowelChart synth={ synth() }/>\n            <br/>\n            <AnalysisChart synth={ synth() }/>\n            <br/>\n            <RecordingPanel synth={ synth() }/>\n            { \" \" }\n            <button onclick={ () => synth().toggleMic() }>\n                Toggle Microphone\n            </button>\n        </div>\n    </Solid.Show>\n}\n\n\nSolidWeb.render(\n    Page,\n    document.getElementById(\"app\")!)"],"names":["context","undefined","registry","setHydrateContext","signalOptions","Symbol","equals","a","b","ERROR","runEffects","runQueue","STALE","PENDING","UNOWNED","owned","cleanups","owner","Owner","Transition","Scheduler","ExternalSourceFactory","Listener","Updates","Effects","ExecCount","transPending","setTransPending","value","options","s","observers","observerSlots","comparator","Object","assign","readSignal","bind","running","sources","has","tValue","writeSignal","fn","c","createComputation","push","updateComputation","runUserEffects","SuspenseContext","id","defaultValue","suspense","render","user","tState","listener","onMount","children","memo","resolveChildren","toArray","Array","isArray","runningTransition","this","state","updates","runUpdates","lookUpstream","sSlot","length","sourceSlots","node","isComp","current","TransitionRunning","add","i","o","disposed","pure","markDownstream","Error","cleanNode","time","runComputation","queueMicrotask","nextValue","err","tOwned","forEach","updatedAt","handleError","init","track","trigger","ordinary","dispose","triggerInTransition","done","l","Promise","resolve","then","t","Set","effects","promises","queue","res","startTransition","inTransition","x","runTop","inFallback","ancestors","top","prev","wait","item","tasks","delete","scheduleQueue","size","apply","e","d","v","len","completeUpdates","userLength","count","slice","ignore","source","pop","index","obs","n","runErrors","fns","f","error","cause","castError","results","result","createProvider","props","createComponent","Comp","Show","keyed","condition","when","child","fallback","createContext","create","$$EVENTS","template","html","isCE","isSVG","document","createElement","innerHTML","content","firstChild","importNode","cloneNode","delegateEvents","eventNames","window","name","addEventListener","eventHandler","use","element","arg","insert","parent","accessor","marker","initial","insertExpression","key","type","composedPath","target","defineProperty","configurable","get","_$HY","handler","disabled","data","call","cancelBubble","_$host","parentNode","host","unwrapArray","childNodes","cleaned","nodeType","remove","multi","toString","createTextNode","cleanChildren","textContent","array","currentArray","normalizeIncomingArray","appendNodes","bLength","aEnd","bEnd","aStart","bStart","after","nextSibling","map","insertBefore","Map","set","sequence","replaceChild","reconcileArrays","appendChild","console","warn","normalized","unwrap","dynamic","String","replacement","inserted","el","isParent","VowelSynth","ctx","AudioContext","sampleRate","audioWorklet","addModule","constructor","waveformCaptureNode","AudioWorkletNode","port","onmessage","ev","captureWaveform","connect","destination","nodeAnalyser","createAnalyser","fftSize","maxDecibels","minDecibels","smoothingTimeConstant","nodeAnalyserData","Uint8Array","nodeAnalyserTimeDomainData","Float32Array","waveformBuffer","waveformBufferIndex","nodeMicFilter","createBiquadFilter","frequency","Q","nodeFormant1Gain","createGain","gain","nodeFormant1Filter","nodeFormant2Gain","nodeFormant2Filter","nodeFormant3Gain","nodeFormant3Filter","nodeFormant4Gain","nodeFormant4Filter","nodeSource","createOscillator","start","recordingBuffer","createBuffer","recordingPlaybackStartTime","cachedFormants","resume","setGain","generalGain","setFrequencies","formant1Freq","formant2Freq","Math","max","min","buffer","outputIndex","getWaveform","fromSampleIndex","getWaveformLatest","latestNumSamples","cacheFormants","formants","getCachedFormants","getAnalyserData","getByteFrequencyData","getAnalyserTimeData","getFloatTimeDomainData","playRecording","nodeRecordingSrc","stop","disconnect","createBufferSource","currentTime","toggleMic","nodeMicSrc","stream","navigator","mediaDevices","getUserMedia","audio","createMediaStreamSource","alert","f1Min","f1Max","f2Min","f2Max","colorSynth","colorFormants","colorFrequencyDomain","logScale","VowelChart","canvas","synth","mouseDown","mousePosNormalized","y","mousePosFormants","f1","f2","mousePath","formantPath","Solid","getContext","mouseMove","mouseUp","requestAnimationFrame","draw","_el$","_tmpl$","_ref$","_$use","style","setProperty","updateMousePos","rect","getBoundingClientRect","clientX","clientY","touches","width","height","floor","mapViewToValue","Common","timer","splice","pow","mapValueToView","p","log","preventDefault","ipaVowels","symbol","isMobile","matchMedia","matches","pixelRatio","devicePixelRatio","w","round","right","left","h","bottom","save","translate","clearRect","fillStyle","fillRect","beginPath","moveTo","freq","lineTo","fill","lineWidth","strokeStyle","font","textAlign","textBaseline","stroke","fillText","vowel","globalAlpha","pA","pB","vecX","vecY","sqrt","arc","PI","vecMagn","vecXN","vecYN","crossSize","toFixed","restore","praatBurgMethod","samples","numCoeffs","b1","b2","aa","m","j","xms","num","denum","unshift","findRootsOfPolynomial","coeffs","r","budget","abs","solveQuadratic","real","imag","delta","s0","detSqrRoot","complexMagnitude","praatGaussianWindow","nMax","nMid","edge","exp","praatPreemphasis","samplingFrequency","dx","preEmphasis","praatLpcToPolynomial","lpc","polynomial","praatFixRootToUnitCircle","root","complexDivide","rootsToFormants","roots","nyquistFrequency","frequencies","atan2","bandwidths","bandwidth","sort","AnalysisChart","canvasCtx","xMargin","freqData","timeData","sample","every","filter","padStart","join","extractFormants","writeString","view","offset","string","setUint8","charCodeAt","RecordingPanel","sampleBuffer","recording","recordingIndex","playing","playingIndex","_tmpl$2","_el$3","_tmpl$3","$$click","recordingFinish","recordingFrame","recordingToggle","_el$4","_tmpl$4","playFrame","play","_el$5","_tmpl$5","format","numChannels","bitDepth","ArrayBuffer","DataView","setUint32","setUint16","output","input","setInt16","floatTo16BitPCM","encodeWAV","blob","Blob","url","URL","createObjectURL","setAttribute","display","body","click","removeChild","exportWav","_el$6","_tmpl$6","async","handle","showOpenFilePicker","multiple","types","description","accept","file","getFile","bytes","arrayBuffer","decodeAudioData","waveform","getChannelData","preemphasized","_","windowed","fixedRoots","testExtractFormants","importWav","copyToChannel","timeDelta","sampleIndexToX","margin","sampleAmplitudeToY","amplitude","at","_$delegateEvents","code","disposer","detachedOwner","unowned","updateFn","SolidWeb","setSynth","_$createComponent","_el$10","_el$11","_el$12","_el$13","_$insert","getElementById"],"sourceRoot":""}